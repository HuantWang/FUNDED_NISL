-----label-----
1
-----code-----
struct ahci_host_priv *ahci_platform_get_resources(struct platform_device *pdev)
{
	struct device *dev = &pdev->dev;
	struct ahci_host_priv *hpriv;
	struct clk *clk;
	int i, rc = -ENOMEM;

	if (!devres_open_group(dev, NULL, GFP_KERNEL))
		return ERR_PTR(-ENOMEM);

	hpriv = devres_alloc(ahci_platform_put_resources, sizeof(*hpriv),
			     GFP_KERNEL);
	if (!hpriv)
		goto err_out;

	devres_add(dev, hpriv);

	hpriv->mmio = devm_ioremap_resource(dev,
			      platform_get_resource(pdev, IORESOURCE_MEM, 0));
	if (IS_ERR(hpriv->mmio)) {
		dev_err(dev, "no mmio space\n");
		rc = PTR_ERR(hpriv->mmio);
		goto err_out;
	}

	hpriv->target_pwr = devm_regulator_get_optional(dev, "target");
	if (IS_ERR(hpriv->target_pwr)) {
		rc = PTR_ERR(hpriv->target_pwr);
		if (rc == -EPROBE_DEFER)
			goto err_out;
		hpriv->target_pwr = NULL;
	}

	for (i = 0; i < AHCI_MAX_CLKS; i++) {
		/*
		 * For now we must use clk_get(dev, NULL) for the first clock,
		 * because some platforms (da850, spear13xx) are not yet
		 * converted to use devicetree for clocks.  For new platforms
		 * this is equivalent to of_clk_get(dev->of_node, 0).
		 */
		if (i == 0)
			clk = clk_get(dev, NULL);
		else
			clk = of_clk_get(dev->of_node, i);

		if (IS_ERR(clk)) {
			rc = PTR_ERR(clk);
			if (rc == -EPROBE_DEFER)
				goto err_out;
			break;
		}
		hpriv->clks[i] = clk;
	}

	hpriv->phy = devm_phy_get(dev, "sata-phy");
	if (IS_ERR(hpriv->phy)) {
		rc = PTR_ERR(hpriv->phy);
		switch (rc) {
		case -ENOSYS:
			/* No PHY support. Check if PHY is required. */
			if (of_find_property(dev->of_node, "phys", NULL)) {
				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");
				goto err_out;
			}
		case -ENODEV:
			/* continue normally */
			hpriv->phy = NULL;
			break;

		case -EPROBE_DEFER:
			goto err_out;

		default:
			dev_err(dev, "couldn't get sata-phy\n");
			goto err_out;
		}
	}

	pm_runtime_enable(dev);
	pm_runtime_get_sync(dev);
	hpriv->got_runtime_pm = true;

	devres_remove_group(dev, NULL);
	return hpriv;

err_out:
	devres_release_group(dev, NULL);
	return ERR_PTR(rc);
}
-----children-----
1,2
1,3
1,4
2,3
4,5
4,6
4,7
7,8
7,9
8,9
10,11
10,12
13,14
13,15
13,16
13,17
13,18
13,19
13,20
13,21
13,22
13,23
13,24
13,25
13,26
13,27
13,28
13,29
13,30
13,31
13,32
13,33
13,34
13,35
14,15
15,16
15,17
16,17
18,19
18,20
18,21
21,22
22,23
23,24
23,25
24,25
27,28
28,29
28,30
29,30
31,32
31,33
34,35
35,36
35,37
36,37
38,39
38,40
41,42
42,43
42,44
42,45
44,45
46,47
46,48
48,49
49,50
50,51
52,53
52,54
53,54
54,55
54,56
54,57
54,58
55,56
57,58
59,60
61,62
63,64
64,65
64,66
65,66
67,68
68,69
70,71
71,72
71,73
72,73
74,75
74,76
74,77
74,78
75,76
77,78
79,80
80,81
81,82
82,83
84,85
86,87
86,88
87,88
88,89
90,91
92,93
93,94
93,95
93,96
94,95
96,97
98,99
100,101
101,102
101,103
102,103
102,104
103,104
106,107
106,108
106,109
107,108
109,110
111,112
111,113
111,114
111,115
112,113
114,115
116,117
119,120
119,121
120,121
120,122
121,122
123,124
123,125
124,125
127,128
127,129
127,130
128,129
129,130
129,131
129,132
130,131
132,133
135,136
136,137
136,138
137,138
139,140
139,141
140,141
142,143
142,144
143,144
146,147
148,149
149,150
149,151
150,151
150,152
151,152
154,155
154,156
154,157
155,156
157,158
160,161
160,162
161,162
161,163
162,163
164,165
164,166
165,166
168,169
168,170
168,171
169,170
170,171
170,172
171,172
173,174
173,175
174,175
176,177
176,178
177,178
180,181
180,182
181,182
181,183
182,183
184,185
185,186
187,188
189,190
190,191
190,192
191,192
191,193
192,193
195,196
197,198
197,199
197,200
197,201
198,199
199,200
199,201
200,201
203,204
203,205
204,205
206,207
208,209
209,210
211,212
211,213
211,214
212,213
212,214
212,215
213,214
213,215
214,215
217,218
218,219
218,220
219,220
221,222
221,223
221,224
222,223
224,225
226,227
228,229
229,230
229,231
230,231
232,233
232,234
232,235
233,234
235,236
235,237
236,237
239,240
241,242
241,243
242,243
242,244
243,244
245,246
247,248
247,249
247,250
248,249
249,250
249,251
250,251
252,253
252,254
253,254
255,256
257,258
257,259
258,259
258,260
259,260
261,262
262,263
264,265
267,268
268,269
268,270
269,270
269,271
270,271
270,272
271,272
274,275
276,277
278,279
279,280
279,281
280,281
280,282
281,282
284,285
284,286
284,287
285,286
287,288
290,291
290,292
291,292
291,293
292,293
294,295
294,296
295,296
298,299
298,300
299,300
300,301
300,302
301,302
303,304
303,305
304,305
306,307
306,308
307,308
310,311
310,312
311,312
313,314
313,315
313,316
313,317
313,318
313,319
313,320
313,321
313,322
313,323
314,315
315,316
316,317
318,319
318,320
319,320
319,321
319,322
319,323
320,321
322,323
322,324
323,324
327,328
329,330
329,331
330,331
331,332
331,333
331,334
332,333
334,335
337,338
339,340
340,341
341,342
343,344
344,345
344,346
345,346
345,347
346,347
349,350
352,353
353,354
354,355
356,357
359,360
360,361
360,362
360,363
361,362
363,364
366,367
368,369
369,370
369,371
370,371
372,373
374,375
375,376
375,377
376,377
378,379
380,381
381,382
381,383
382,383
382,384
383,384
387,388
388,389
388,390
388,391
389,390
391,392
393,394
395,396
396,397
398,399
398,400
400,401
401,402
401,403
401,404
402,403
404,405
406,407
408,409
409,410
409,411
410,411
412,413
-----nextToken-----
3,5,6,9,11,12,17,19,20,25,26,30,32,33,37,39,40,43,45,47,51,56,58,60,62,66,69,73,76,78,83,85,89,91,95,97,99,104,105,108,110,113,115,117,118,122,125,126,131,133,134,138,141,144,145,147,152,153,156,158,159,163,166,167,172,175,178,179,183,186,188,193,194,196,201,202,205,207,210,215,216,220,223,225,227,231,234,237,238,240,244,246,251,254,256,260,263,265,266,272,273,275,277,282,283,286,288,289,293,296,297,302,305,308,309,312,317,321,324,325,326,328,333,335,336,338,342,347,348,350,351,355,357,358,362,364,365,367,371,373,377,379,384,385,386,390,392,394,397,399,403,405,407,411,413
-----computeFrom-----
71,72
71,73
101,102
101,103
136,137
136,138
149,150
149,151
170,171
170,172
181,182
181,183
190,191
190,192
199,200
199,201
203,204
203,205
213,214
213,215
218,219
218,220
229,230
229,231
249,250
249,251
258,259
258,260
268,269
268,270
279,280
279,281
300,301
300,302
344,345
344,346
381,382
381,383
-----guardedBy-----
-----guardedByNegation-----
215,240
-----lastLexicalUse-----
-----jump-----
-----attribute-----
FunctionDefinition;ElaboratedTypeSpecifier;Name;FunctionDeclarator;Pointer;Name;ParameterDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;CompoundStatement;DeclarationStatement;SimpleDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;EqualsInitializer;UnaryExpression;FieldReference;IdExpression;Name;Name;DeclarationStatement;SimpleDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;Declarator;Name;EqualsInitializer;UnaryExpression;IdExpression;Name;IfStatement;UnaryExpression;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;IdExpression;Name;ReturnStatement;FunctionCallExpression;IdExpression;Name;UnaryExpression;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;UnaryExpression;UnaryExpression;UnaryExpression;IdExpression;Name;IdExpression;Name;IfStatement;UnaryExpression;IdExpression;Name;GotoStatement;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;LiteralExpression;IfStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;ExpressionStatement;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;GotoStatement;Name;ExpressionStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;IfStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;IfStatement;BinaryExpression;IdExpression;Name;UnaryExpression;IdExpression;Name;GotoStatement;Name;ExpressionStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;IdExpression;Name;ForStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;BinaryExpression;IdExpression;Name;IdExpression;Name;UnaryExpression;IdExpression;Name;CompoundStatement;IfStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ExpressionStatement;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;IdExpression;Name;IfStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IfStatement;BinaryExpression;IdExpression;Name;UnaryExpression;IdExpression;Name;GotoStatement;Name;BreakStatement;ExpressionStatement;BinaryExpression;ArraySubscriptExpression;FieldReference;IdExpression;Name;Name;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;IfStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;SwitchStatement;IdExpression;Name;CompoundStatement;CaseStatement;UnaryExpression;IdExpression;Name;IfStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;LiteralExpression;IdExpression;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;GotoStatement;Name;CaseStatement;UnaryExpression;IdExpression;Name;ExpressionStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;IdExpression;Name;BreakStatement;CaseStatement;UnaryExpression;IdExpression;Name;GotoStatement;Name;DefaultStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;GotoStatement;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;LiteralExpression;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ReturnStatement;IdExpression;Name;LabelStatement;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ReturnStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;
-----ast_node-----
struct ahci_host_priv *ahci_platform_get_resources(struct platform_device *pdev){	struct device *dev = &pdev->dev;	struct ahci_host_priv *hpriv;	struct clk *clk;	int i, rc = -ENOMEM;	if (!devres_open_group(dev, NULL, GFP_KERNEL))		return ERR_PTR(-ENOMEM);	hpriv = devres_alloc(ahci_platform_put_resources, sizeof(*hpriv),			     GFP_KERNEL);	if (!hpriv)		goto err_out;	devres_add(dev, hpriv);	hpriv->mmio = devm_ioremap_resource(dev,			      platform_get_resource(pdev, IORESOURCE_MEM, 0));	if (IS_ERR(hpriv->mmio)) {		dev_err(dev, "no mmio space\n");		rc = PTR_ERR(hpriv->mmio);		goto err_out;	}	hpriv->target_pwr = devm_regulator_get_optional(dev, "target");	if (IS_ERR(hpriv->target_pwr)) {		rc = PTR_ERR(hpriv->target_pwr);		if (rc == -EPROBE_DEFER)			goto err_out;		hpriv->target_pwr = NULL;	}	for (i = 0; i < AHCI_MAX_CLKS; i++) {		/*		 * For now we must use clk_get(dev, NULL) for the first clock,		 * because some platforms (da850, spear13xx) are not yet		 * converted to use devicetree for clocks.  For new platforms		 * this is equivalent to of_clk_get(dev->of_node, 0).		 */		if (i == 0)			clk = clk_get(dev, NULL);		else			clk = of_clk_get(dev->of_node, i);		if (IS_ERR(clk)) {			rc = PTR_ERR(clk);			if (rc == -EPROBE_DEFER)				goto err_out;			break;		}		hpriv->clks[i] = clk;	}	hpriv->phy = devm_phy_get(dev, "sata-phy");	if (IS_ERR(hpriv->phy)) {		rc = PTR_ERR(hpriv->phy);		switch (rc) {		case -ENOSYS:			/* No PHY support. Check if PHY is required. */			if (of_find_property(dev->of_node, "phys", NULL)) {				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}		case -ENODEV:			/* continue normally */			hpriv->phy = NULL;			break;		case -EPROBE_DEFER:			goto err_out;		default:			dev_err(dev, "couldn't get sata-phy\n");			goto err_out;		}	}	pm_runtime_enable(dev);	pm_runtime_get_sync(dev);	hpriv->got_runtime_pm = true;	devres_remove_group(dev, NULL);	return hpriv;err_out:	devres_release_group(dev, NULL);	return ERR_PTR(rc);}
struct ahci_host_priv
ahci_host_priv
*ahci_platform_get_resources(struct platform_device *pdev)
*
ahci_platform_get_resources
struct platform_device *pdev
struct platform_device
platform_device
*pdev
*
pdev
{	struct device *dev = &pdev->dev;	struct ahci_host_priv *hpriv;	struct clk *clk;	int i, rc = -ENOMEM;	if (!devres_open_group(dev, NULL, GFP_KERNEL))		return ERR_PTR(-ENOMEM);	hpriv = devres_alloc(ahci_platform_put_resources, sizeof(*hpriv),			     GFP_KERNEL);	if (!hpriv)		goto err_out;	devres_add(dev, hpriv);	hpriv->mmio = devm_ioremap_resource(dev,			      platform_get_resource(pdev, IORESOURCE_MEM, 0));	if (IS_ERR(hpriv->mmio)) {		dev_err(dev, "no mmio space\n");		rc = PTR_ERR(hpriv->mmio);		goto err_out;	}	hpriv->target_pwr = devm_regulator_get_optional(dev, "target");	if (IS_ERR(hpriv->target_pwr)) {		rc = PTR_ERR(hpriv->target_pwr);		if (rc == -EPROBE_DEFER)			goto err_out;		hpriv->target_pwr = NULL;	}	for (i = 0; i < AHCI_MAX_CLKS; i++) {		/*		 * For now we must use clk_get(dev, NULL) for the first clock,		 * because some platforms (da850, spear13xx) are not yet		 * converted to use devicetree for clocks.  For new platforms		 * this is equivalent to of_clk_get(dev->of_node, 0).		 */		if (i == 0)			clk = clk_get(dev, NULL);		else			clk = of_clk_get(dev->of_node, i);		if (IS_ERR(clk)) {			rc = PTR_ERR(clk);			if (rc == -EPROBE_DEFER)				goto err_out;			break;		}		hpriv->clks[i] = clk;	}	hpriv->phy = devm_phy_get(dev, "sata-phy");	if (IS_ERR(hpriv->phy)) {		rc = PTR_ERR(hpriv->phy);		switch (rc) {		case -ENOSYS:			/* No PHY support. Check if PHY is required. */			if (of_find_property(dev->of_node, "phys", NULL)) {				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}		case -ENODEV:			/* continue normally */			hpriv->phy = NULL;			break;		case -EPROBE_DEFER:			goto err_out;		default:			dev_err(dev, "couldn't get sata-phy\n");			goto err_out;		}	}	pm_runtime_enable(dev);	pm_runtime_get_sync(dev);	hpriv->got_runtime_pm = true;	devres_remove_group(dev, NULL);	return hpriv;err_out:	devres_release_group(dev, NULL);	return ERR_PTR(rc);}
struct device *dev = &pdev->dev;
struct device *dev = &pdev->dev;
struct device
device
*dev = &pdev->dev
*
dev
= &pdev->dev
&pdev->dev
pdev->dev
pdev
pdev
dev
struct ahci_host_priv *hpriv;
struct ahci_host_priv *hpriv;
struct ahci_host_priv
ahci_host_priv
*hpriv
*
hpriv
struct clk *clk;
struct clk *clk;
struct clk
clk
*clk
*
clk
int i, rc = -ENOMEM;
int i, rc = -ENOMEM;
int
i
i
rc = -ENOMEM
rc
= -ENOMEM
-ENOMEM
ENOMEM
ENOMEM
if (!devres_open_group(dev, NULL, GFP_KERNEL))		return ERR_PTR(-ENOMEM);
!devres_open_group(dev, NULL, GFP_KERNEL)
devres_open_group(dev, NULL, GFP_KERNEL)
devres_open_group
devres_open_group
dev
dev
NULL
NULL
GFP_KERNEL
GFP_KERNEL
return ERR_PTR(-ENOMEM);
ERR_PTR(-ENOMEM)
ERR_PTR
ERR_PTR
-ENOMEM
ENOMEM
ENOMEM
hpriv = devres_alloc(ahci_platform_put_resources, sizeof(*hpriv),			     GFP_KERNEL);
hpriv = devres_alloc(ahci_platform_put_resources, sizeof(*hpriv),			     GFP_KERNEL)
hpriv
hpriv
devres_alloc(ahci_platform_put_resources, sizeof(*hpriv),			     GFP_KERNEL)
devres_alloc
devres_alloc
ahci_platform_put_resources
ahci_platform_put_resources
sizeof(*hpriv)
(*hpriv)
*hpriv
hpriv
hpriv
GFP_KERNEL
GFP_KERNEL
if (!hpriv)		goto err_out;
!hpriv
hpriv
hpriv
goto err_out;
err_out
devres_add(dev, hpriv);
devres_add(dev, hpriv)
devres_add
devres_add
dev
dev
hpriv
hpriv
hpriv->mmio = devm_ioremap_resource(dev,			      platform_get_resource(pdev, IORESOURCE_MEM, 0));
hpriv->mmio = devm_ioremap_resource(dev,			      platform_get_resource(pdev, IORESOURCE_MEM, 0))
hpriv->mmio
hpriv
hpriv
mmio
devm_ioremap_resource(dev,			      platform_get_resource(pdev, IORESOURCE_MEM, 0))
devm_ioremap_resource
devm_ioremap_resource
dev
dev
platform_get_resource(pdev, IORESOURCE_MEM, 0)
platform_get_resource
platform_get_resource
pdev
pdev
IORESOURCE_MEM
IORESOURCE_MEM
0
if (IS_ERR(hpriv->mmio)) {		dev_err(dev, "no mmio space\n");		rc = PTR_ERR(hpriv->mmio);		goto err_out;	}
IS_ERR(hpriv->mmio)
IS_ERR
IS_ERR
hpriv->mmio
hpriv
hpriv
mmio
{		dev_err(dev, "no mmio space\n");		rc = PTR_ERR(hpriv->mmio);		goto err_out;	}
dev_err(dev, "no mmio space\n");
dev_err(dev, "no mmio space\n")
dev_err
dev_err
dev
dev
"no mmio space\n"
rc = PTR_ERR(hpriv->mmio);
rc = PTR_ERR(hpriv->mmio)
rc
rc
PTR_ERR(hpriv->mmio)
PTR_ERR
PTR_ERR
hpriv->mmio
hpriv
hpriv
mmio
goto err_out;
err_out
hpriv->target_pwr = devm_regulator_get_optional(dev, "target");
hpriv->target_pwr = devm_regulator_get_optional(dev, "target")
hpriv->target_pwr
hpriv
hpriv
target_pwr
devm_regulator_get_optional(dev, "target")
devm_regulator_get_optional
devm_regulator_get_optional
dev
dev
"target"
if (IS_ERR(hpriv->target_pwr)) {		rc = PTR_ERR(hpriv->target_pwr);		if (rc == -EPROBE_DEFER)			goto err_out;		hpriv->target_pwr = NULL;	}
IS_ERR(hpriv->target_pwr)
IS_ERR
IS_ERR
hpriv->target_pwr
hpriv
hpriv
target_pwr
{		rc = PTR_ERR(hpriv->target_pwr);		if (rc == -EPROBE_DEFER)			goto err_out;		hpriv->target_pwr = NULL;	}
rc = PTR_ERR(hpriv->target_pwr);
rc = PTR_ERR(hpriv->target_pwr)
rc
rc
PTR_ERR(hpriv->target_pwr)
PTR_ERR
PTR_ERR
hpriv->target_pwr
hpriv
hpriv
target_pwr
if (rc == -EPROBE_DEFER)			goto err_out;
rc == -EPROBE_DEFER
rc
rc
-EPROBE_DEFER
EPROBE_DEFER
EPROBE_DEFER
goto err_out;
err_out
hpriv->target_pwr = NULL;
hpriv->target_pwr = NULL
hpriv->target_pwr
hpriv
hpriv
target_pwr
NULL
NULL
for (i = 0; i < AHCI_MAX_CLKS; i++) {		/*		 * For now we must use clk_get(dev, NULL) for the first clock,		 * because some platforms (da850, spear13xx) are not yet		 * converted to use devicetree for clocks.  For new platforms		 * this is equivalent to of_clk_get(dev->of_node, 0).		 */		if (i == 0)			clk = clk_get(dev, NULL);		else			clk = of_clk_get(dev->of_node, i);		if (IS_ERR(clk)) {			rc = PTR_ERR(clk);			if (rc == -EPROBE_DEFER)				goto err_out;			break;		}		hpriv->clks[i] = clk;	}
i = 0;
i = 0
i
i
0
i < AHCI_MAX_CLKS
i
i
AHCI_MAX_CLKS
AHCI_MAX_CLKS
i++
i
i
{		/*		 * For now we must use clk_get(dev, NULL) for the first clock,		 * because some platforms (da850, spear13xx) are not yet		 * converted to use devicetree for clocks.  For new platforms		 * this is equivalent to of_clk_get(dev->of_node, 0).		 */		if (i == 0)			clk = clk_get(dev, NULL);		else			clk = of_clk_get(dev->of_node, i);		if (IS_ERR(clk)) {			rc = PTR_ERR(clk);			if (rc == -EPROBE_DEFER)				goto err_out;			break;		}		hpriv->clks[i] = clk;	}
if (i == 0)			clk = clk_get(dev, NULL);		else			clk = of_clk_get(dev->of_node, i);
i == 0
i
i
0
clk = clk_get(dev, NULL);
clk = clk_get(dev, NULL)
clk
clk
clk_get(dev, NULL)
clk_get
clk_get
dev
dev
NULL
NULL
clk = of_clk_get(dev->of_node, i);
clk = of_clk_get(dev->of_node, i)
clk
clk
of_clk_get(dev->of_node, i)
of_clk_get
of_clk_get
dev->of_node
dev
dev
of_node
i
i
if (IS_ERR(clk)) {			rc = PTR_ERR(clk);			if (rc == -EPROBE_DEFER)				goto err_out;			break;		}
IS_ERR(clk)
IS_ERR
IS_ERR
clk
clk
{			rc = PTR_ERR(clk);			if (rc == -EPROBE_DEFER)				goto err_out;			break;		}
rc = PTR_ERR(clk);
rc = PTR_ERR(clk)
rc
rc
PTR_ERR(clk)
PTR_ERR
PTR_ERR
clk
clk
if (rc == -EPROBE_DEFER)				goto err_out;
rc == -EPROBE_DEFER
rc
rc
-EPROBE_DEFER
EPROBE_DEFER
EPROBE_DEFER
goto err_out;
err_out
break;
hpriv->clks[i] = clk;
hpriv->clks[i] = clk
hpriv->clks[i]
hpriv->clks
hpriv
hpriv
clks
i
i
clk
clk
hpriv->phy = devm_phy_get(dev, "sata-phy");
hpriv->phy = devm_phy_get(dev, "sata-phy")
hpriv->phy
hpriv
hpriv
phy
devm_phy_get(dev, "sata-phy")
devm_phy_get
devm_phy_get
dev
dev
"sata-phy"
if (IS_ERR(hpriv->phy)) {		rc = PTR_ERR(hpriv->phy);		switch (rc) {		case -ENOSYS:			/* No PHY support. Check if PHY is required. */			if (of_find_property(dev->of_node, "phys", NULL)) {				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}		case -ENODEV:			/* continue normally */			hpriv->phy = NULL;			break;		case -EPROBE_DEFER:			goto err_out;		default:			dev_err(dev, "couldn't get sata-phy\n");			goto err_out;		}	}
IS_ERR(hpriv->phy)
IS_ERR
IS_ERR
hpriv->phy
hpriv
hpriv
phy
{		rc = PTR_ERR(hpriv->phy);		switch (rc) {		case -ENOSYS:			/* No PHY support. Check if PHY is required. */			if (of_find_property(dev->of_node, "phys", NULL)) {				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}		case -ENODEV:			/* continue normally */			hpriv->phy = NULL;			break;		case -EPROBE_DEFER:			goto err_out;		default:			dev_err(dev, "couldn't get sata-phy\n");			goto err_out;		}	}
rc = PTR_ERR(hpriv->phy);
rc = PTR_ERR(hpriv->phy)
rc
rc
PTR_ERR(hpriv->phy)
PTR_ERR
PTR_ERR
hpriv->phy
hpriv
hpriv
phy
switch (rc) {		case -ENOSYS:			/* No PHY support. Check if PHY is required. */			if (of_find_property(dev->of_node, "phys", NULL)) {				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}		case -ENODEV:			/* continue normally */			hpriv->phy = NULL;			break;		case -EPROBE_DEFER:			goto err_out;		default:			dev_err(dev, "couldn't get sata-phy\n");			goto err_out;		}
rc
rc
{		case -ENOSYS:			/* No PHY support. Check if PHY is required. */			if (of_find_property(dev->of_node, "phys", NULL)) {				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}		case -ENODEV:			/* continue normally */			hpriv->phy = NULL;			break;		case -EPROBE_DEFER:			goto err_out;		default:			dev_err(dev, "couldn't get sata-phy\n");			goto err_out;		}
case -ENOSYS:
-ENOSYS
ENOSYS
ENOSYS
if (of_find_property(dev->of_node, "phys", NULL)) {				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}
of_find_property(dev->of_node, "phys", NULL)
of_find_property
of_find_property
dev->of_node
dev
dev
of_node
"phys"
NULL
NULL
{				dev_err(dev, "couldn't get sata-phy: ENOSYS\n");				goto err_out;			}
dev_err(dev, "couldn't get sata-phy: ENOSYS\n");
dev_err(dev, "couldn't get sata-phy: ENOSYS\n")
dev_err
dev_err
dev
dev
"couldn't get sata-phy: ENOSYS\n"
goto err_out;
err_out
case -ENODEV:
-ENODEV
ENODEV
ENODEV
hpriv->phy = NULL;
hpriv->phy = NULL
hpriv->phy
hpriv
hpriv
phy
NULL
NULL
break;
case -EPROBE_DEFER:
-EPROBE_DEFER
EPROBE_DEFER
EPROBE_DEFER
goto err_out;
err_out
default:
dev_err(dev, "couldn't get sata-phy\n");
dev_err(dev, "couldn't get sata-phy\n")
dev_err
dev_err
dev
dev
"couldn't get sata-phy\n"
goto err_out;
err_out
pm_runtime_enable(dev);
pm_runtime_enable(dev)
pm_runtime_enable
pm_runtime_enable
dev
dev
pm_runtime_get_sync(dev);
pm_runtime_get_sync(dev)
pm_runtime_get_sync
pm_runtime_get_sync
dev
dev
hpriv->got_runtime_pm = true;
hpriv->got_runtime_pm = true
hpriv->got_runtime_pm
hpriv
hpriv
got_runtime_pm
true
devres_remove_group(dev, NULL);
devres_remove_group(dev, NULL)
devres_remove_group
devres_remove_group
dev
dev
NULL
NULL
return hpriv;
hpriv
hpriv
err_out:	devres_release_group(dev, NULL);
err_out
devres_release_group(dev, NULL);
devres_release_group(dev, NULL)
devres_release_group
devres_release_group
dev
dev
NULL
NULL
return ERR_PTR(rc);
ERR_PTR(rc)
ERR_PTR
ERR_PTR
rc
rc
-----joern-----
(146,22,0)
(203,66,0)
(130,45,0)
(167,199,0)
(8,209,0)
(39,45,0)
(211,45,0)
(23,45,0)
(205,24,0)
(97,89,0)
(100,89,0)
(31,112,0)
(34,69,0)
(122,54,0)
(189,188,0)
(148,188,0)
(154,47,0)
(201,45,0)
(29,69,0)
(42,56,0)
(197,51,0)
(190,45,0)
(163,22,0)
(80,89,0)
(109,102,0)
(33,45,0)
(17,135,0)
(181,11,0)
(90,215,0)
(164,37,0)
(9,208,0)
(172,14,0)
(81,196,0)
(60,45,0)
(7,71,0)
(29,24,0)
(123,211,0)
(176,198,0)
(206,89,0)
(118,172,0)
(89,45,0)
(126,159,0)
(24,136,0)
(22,146,0)
(179,184,0)
(91,115,0)
(61,208,0)
(100,191,0)
(199,102,0)
(139,27,0)
(90,177,0)
(57,45,0)
(51,89,0)
(55,97,0)
(107,131,0)
(27,91,0)
(196,191,0)
(159,13,0)
(56,42,0)
(48,89,0)
(186,116,0)
(49,108,0)
(30,51,0)
(76,139,0)
(75,38,0)
(66,122,0)
(111,89,0)
(53,45,0)
(62,170,0)
(155,121,0)
(121,212,0)
(70,91,0)
(63,208,0)
(216,24,0)
(29,177,0)
(84,69,0)
(212,121,0)
(124,159,0)
(27,111,0)
(170,191,0)
(166,24,0)
(108,45,0)
(77,33,0)
(19,45,0)
(200,45,0)
(180,162,0)
(80,177,0)
(42,89,0)
(178,71,0)
(22,28,0)
(95,100,0)
(199,71,0)
(144,97,0)
(42,13,0)
(153,199,0)
(169,27,0)
(79,136,0)
(97,24,0)
(198,24,0)
(216,45,0)
(71,199,0)
(193,45,0)
(4,133,0)
(133,167,0)
(44,90,0)
(33,77,0)
(85,102,0)
(184,45,0)
(146,35,0)
(135,17,0)
(83,14,0)
(96,201,0)
(142,24,0)
(24,45,0)
(59,69,0)
(166,35,0)
(143,216,0)
(6,111,0)
(65,47,0)
(100,147,0)
(48,191,0)
(215,90,0)
(54,122,0)
(170,24,0)
(99,134,0)
(145,188,0)
(191,45,0)
(136,24,0)
(168,33,0)
(23,24,0)
(199,167,0)
(152,77,0)
(12,166,0)
(129,100,0)
(87,102,0)
(139,135,0)
(159,89,0)
(162,99,0)
(118,51,0)
(198,14,0)
(117,111,0)
(88,170,0)
(202,11,0)
(139,172,0)
(79,92,0)
(140,194,0)
(122,66,0)
(165,79,0)
(89,66,0)
(120,207,0)
(196,81,0)
(171,65,0)
(169,38,0)
(177,45,0)
(40,28,0)
(105,188,0)
(98,188,0)
(21,134,0)
(185,45,0)
(116,167,0)
(207,188,0)
(72,166,0)
(74,208,0)
(25,194,0)
(82,167,0)
(58,23,0)
(160,87,0)
(137,205,0)
(139,33,0)
(150,205,0)
(139,113,0)
(195,24,0)
(73,201,0)
(175,212,0)
(94,181,0)
(64,35,0)
(43,99,0)
(13,45,0)
(146,167,0)
(3,195,0)
(133,35,0)
(121,22,0)
(141,102,0)
(157,48,0)
(147,100,0)
(50,80,0)
(27,80,0)
(192,198,0)
(138,37,0)
(114,188,0)
(177,29,0)
(13,205,0)
(69,92,0)
(162,89,0)
(69,29,0)
(91,133,0)
(183,102,0)
(68,131,0)
(15,90,0)
(169,108,0)
(149,209,0)
(27,45,0)
(37,207,0)
(97,45,0)
(196,89,0)
(27,162,0)
(111,13,0)
(115,89,0)
(209,187,0)
(159,17,0)
(132,206,0)
(115,91,0)
(191,170,0)
(46,115,0)
(112,75,0)
(104,28,0)
(113,134,0)
(16,42,0)
(1,85,0)
(52,48,0)
(182,23,0)
(90,89,0)
(201,24,0)
(26,162,0)
(133,131,0)
(5,187,0)
(103,89,0)
(181,113,0)
(32,29,0)
(135,2,0)
(156,45,0)
(11,181,0)
(147,113,0)
(161,195,0)
(151,113,0)
(214,2,0)
(113,147,0)
(184,24,0)
(213,196,0)
(210,172,0)
(0,188,0)
(27,48,0)
(208,63,0)
(205,13,0)
(139,22,0)
(17,159,0)
(67,65,0)
(78,115,0)
(91,102,0)
(195,188,0)
(136,79,0)
(174,135,0)
(110,196,0)
(86,79,0)
(116,35,0)
(127,45,0)
(194,89,0)
(208,24,0)
(51,118,0)
(75,112,0)
(204,66,0)
(41,80,0)
(71,24,0)
(125,183,0)
(93,146,0)
(108,89,0)
(51,177,0)
(101,183,0)
(36,54,0)
(194,211,0)
(66,89,0)
(35,166,0)
(10,85,0)
(47,65,0)
(172,118,0)
(158,47,0)
(106,188,0)
(18,42,0)
(195,3,1)
(27,48,1)
(146,93,1)
(181,113,1)
(38,75,1)
(175,155,1)
(100,89,1)
(73,98,1)
(168,24,1)
(12,64,1)
(51,177,1)
(192,215,1)
(85,10,1)
(35,166,1)
(153,71,1)
(195,24,1)
(121,22,1)
(169,27,1)
(24,136,1)
(169,38,1)
(126,174,1)
(81,196,1)
(205,24,1)
(3,161,1)
(1,87,1)
(216,24,1)
(90,15,1)
(162,89,1)
(213,191,1)
(59,34,1)
(29,24,1)
(27,139,1)
(111,89,1)
(163,116,1)
(118,51,1)
(65,171,1)
(73,173,1)
(208,74,1)
(206,89,1)
(89,66,1)
(113,147,1)
(162,26,1)
(111,6,1)
(20,121,1)
(215,90,1)
(102,141,1)
(90,177,1)
(210,198,1)
(202,94,1)
(137,111,1)
(108,49,1)
(115,46,1)
(77,152,1)
(87,160,1)
(34,32,1)
(30,210,1)
(64,183,1)
(201,24,1)
(135,17,1)
(146,35,1)
(182,58,1)
(117,85,1)
(100,191,1)
(216,143,1)
(88,48,1)
(42,13,1)
(94,113,1)
(47,65,1)
(186,35,1)
(159,13,1)
(93,163,1)
(196,110,1)
(164,138,1)
(23,24,1)
(109,99,1)
(191,170,1)
(109,81,1)
(48,52,1)
(161,128,1)
(194,140,1)
(90,89,1)
(186,167,1)
(206,132,1)
(129,151,1)
(121,212,1)
(140,25,1)
(27,80,1)
(87,102,1)
(133,35,1)
(97,24,1)
(133,167,1)
(23,182,1)
(149,8,1)
(116,167,1)
(116,35,1)
(199,71,1)
(91,102,1)
(141,109,1)
(80,89,1)
(196,191,1)
(66,204,1)
(4,91,1)
(62,88,1)
(54,36,1)
(51,197,1)
(183,102,1)
(201,96,1)
(78,116,1)
(80,50,1)
(179,189,1)
(124,126,1)
(104,121,1)
(73,20,1)
(209,149,1)
(11,202,1)
(139,22,1)
(73,105,1)
(144,55,1)
(103,63,1)
(146,167,1)
(159,124,1)
(79,92,1)
(36,203,1)
(166,72,1)
(31,63,1)
(143,184,1)
(27,111,1)
(97,144,1)
(197,30,1)
(170,24,1)
(8,47,1)
(18,16,1)
(95,129,1)
(167,199,1)
(205,150,1)
(61,9,1)
(56,42,1)
(72,12,1)
(100,95,1)
(9,33,1)
(199,102,1)
(17,159,1)
(166,24,1)
(74,61,1)
(51,89,1)
(75,112,1)
(198,24,1)
(98,195,1)
(13,205,1)
(174,56,1)
(211,123,1)
(184,24,1)
(177,29,1)
(1,102,1)
(71,178,1)
(79,165,1)
(33,77,1)
(15,44,1)
(116,186,1)
(133,4,1)
(25,216,1)
(125,101,1)
(91,70,1)
(27,91,1)
(204,122,1)
(212,175,1)
(136,79,1)
(97,89,1)
(73,119,1)
(123,194,1)
(50,41,1)
(147,100,1)
(84,59,1)
(165,86,1)
(189,207,1)
(120,37,1)
(46,78,1)
(22,146,1)
(83,172,1)
(101,85,1)
(82,183,1)
(196,89,1)
(199,153,1)
(7,82,1)
(99,43,1)
(194,89,1)
(55,206,1)
(32,80,1)
(154,158,1)
(41,97,1)
(139,135,1)
(42,89,1)
(159,89,1)
(27,162,1)
(115,89,1)
(158,65,1)
(151,81,1)
(91,115,1)
(6,117,1)
(42,18,1)
(85,102,1)
(66,122,1)
(48,89,1)
(43,162,1)
(47,154,1)
(117,104,1)
(10,1,1)
(157,215,1)
(73,83,1)
(181,11,1)
(207,120,1)
(26,180,1)
(70,115,1)
(119,181,1)
(178,7,1)
(71,24,1)
(132,89,1)
(58,211,1)
(128,135,1)
(139,76,1)
(69,84,1)
(63,208,1)
(108,89,1)
(198,176,1)
(173,206,1)
(49,23,1)
(169,108,1)
(170,62,1)
(73,5,1)
(5,209,1)
(112,31,1)
(171,67,1)
(69,92,1)
(183,125,1)
(155,22,1)
(44,177,1)
(122,54,1)
(208,24,1)
(184,179,1)
(172,118,1)
(138,47,1)
(76,201,1)
(180,181,1)
(160,133,1)
(52,157,1)
(150,137,1)
(139,172,1)
(16,13,1)
(203,103,1)
(152,168,1)
(86,142,1)
(179,56,1)
(37,164,1)
(110,213,1)
(139,113,1)
(176,192,1)
(139,33,1)
(29,69,1)
(96,73,1)
(38,63,2)
(201,56,2)
(51,215,2)
(20,121,2)
(27,206,2)
(176,215,2)
(49,47,2)
(100,191,2)
(55,206,2)
(90,206,2)
(91,116,2)
(5,47,2)
(71,24,2)
(108,89,2)
(121,116,2)
(63,208,2)
(13,205,2)
(46,116,2)
(143,56,2)
(121,22,2)
(177,29,2)
(212,116,2)
(89,63,2)
(54,63,2)
(18,85,2)
(155,116,2)
(206,63,2)
(209,47,2)
(10,181,2)
(139,113,2)
(166,24,2)
(194,47,2)
(139,33,2)
(201,215,2)
(139,47,2)
(118,51,2)
(70,116,2)
(215,90,2)
(51,177,2)
(181,113,2)
(139,206,2)
(116,167,2)
(216,24,2)
(49,56,2)
(27,91,2)
(27,47,2)
(201,47,2)
(103,63,2)
(160,116,2)
(183,102,2)
(69,206,2)
(73,181,2)
(140,47,2)
(191,215,2)
(73,206,2)
(151,81,2)
(170,24,2)
(27,48,2)
(139,135,2)
(189,47,2)
(69,92,2)
(147,81,2)
(198,215,2)
(29,69,2)
(211,56,2)
(203,63,2)
(1,116,2)
(169,27,2)
(139,215,2)
(85,181,2)
(138,47,2)
(41,206,2)
(43,181,2)
(139,56,2)
(211,47,2)
(166,183,2)
(122,63,2)
(118,215,2)
(8,47,2)
(197,215,2)
(73,121,2)
(113,81,2)
(82,183,2)
(194,56,2)
(101,85,2)
(62,215,2)
(184,47,2)
(111,121,2)
(76,121,2)
(56,85,2)
(16,121,2)
(137,121,2)
(27,162,2)
(113,147,2)
(59,206,2)
(167,183,2)
(136,79,2)
(159,13,2)
(48,89,2)
(116,85,2)
(201,181,2)
(102,81,2)
(75,63,2)
(52,215,2)
(183,85,2)
(85,116,2)
(129,81,2)
(72,183,2)
(27,121,2)
(73,47,2)
(122,54,2)
(180,181,2)
(96,56,2)
(181,81,2)
(95,81,2)
(76,56,2)
(196,89,2)
(135,17,2)
(58,56,2)
(204,63,2)
(205,85,2)
(146,116,2)
(18,121,2)
(216,56,2)
(123,47,2)
(178,183,2)
(85,81,2)
(199,183,2)
(23,47,2)
(44,206,2)
(93,116,2)
(81,196,2)
(13,121,2)
(96,47,2)
(215,206,2)
(1,181,2)
(150,85,2)
(27,215,2)
(96,121,2)
(198,24,2)
(159,56,2)
(181,11,2)
(80,206,2)
(119,181,2)
(147,100,2)
(170,215,2)
(195,56,2)
(207,47,2)
(90,89,2)
(146,35,2)
(141,81,2)
(120,47,2)
(97,206,2)
(42,121,2)
(91,115,2)
(177,206,2)
(22,146,2)
(146,167,2)
(100,89,2)
(25,56,2)
(133,167,2)
(175,116,2)
(140,56,2)
(66,122,2)
(76,47,2)
(139,22,2)
(11,81,2)
(51,89,2)
(199,71,2)
(123,56,2)
(76,181,2)
(15,206,2)
(143,47,2)
(90,177,2)
(64,183,2)
(10,81,2)
(201,121,2)
(108,56,2)
(36,63,2)
(17,56,2)
(30,215,2)
(25,47,2)
(33,77,2)
(37,47,2)
(79,92,2)
(121,212,2)
(102,181,2)
(186,85,2)
(3,56,2)
(4,116,2)
(47,65,2)
(42,13,2)
(117,85,2)
(174,56,2)
(139,121,2)
(133,35,2)
(27,181,2)
(27,80,2)
(16,85,2)
(98,56,2)
(194,89,2)
(173,206,2)
(199,102,2)
(104,121,2)
(108,47,2)
(111,85,2)
(42,85,2)
(196,191,2)
(149,47,2)
(167,199,2)
(179,47,2)
(73,215,2)
(163,116,2)
(10,116,2)
(99,181,2)
(23,24,2)
(157,215,2)
(111,89,2)
(94,81,2)
(206,89,2)
(23,56,2)
(112,63,2)
(205,24,2)
(75,112,2)
(42,89,2)
(13,85,2)
(210,215,2)
(96,206,2)
(192,215,2)
(32,206,2)
(115,116,2)
(12,183,2)
(164,47,2)
(27,56,2)
(135,56,2)
(109,181,2)
(56,121,2)
(184,24,2)
(144,206,2)
(17,159,2)
(109,81,2)
(71,183,2)
(191,170,2)
(133,116,2)
(202,81,2)
(195,24,2)
(153,183,2)
(80,89,2)
(196,215,2)
(162,89,2)
(208,24,2)
(78,116,2)
(27,111,2)
(139,172,2)
(89,66,2)
(97,24,2)
(139,181,2)
(162,181,2)
(29,24,2)
(182,47,2)
(22,116,2)
(35,183,2)
(26,181,2)
(216,47,2)
(117,121,2)
(29,206,2)
(97,89,2)
(6,121,2)
(115,89,2)
(24,136,2)
(66,63,2)
(137,85,2)
(132,63,2)
(84,206,2)
(96,181,2)
(125,85,2)
(128,56,2)
(35,166,2)
(31,63,2)
(150,121,2)
(76,206,2)
(172,215,2)
(76,215,2)
(34,206,2)
(201,24,2)
(124,56,2)
(73,56,2)
(169,38,2)
(96,215,2)
(159,89,2)
(205,121,2)
(141,181,2)
(179,56,2)
(88,215,2)
(201,206,2)
(184,56,2)
(213,215,2)
(100,81,2)
(91,102,2)
(1,81,2)
(58,47,2)
(126,56,2)
(7,183,2)
(161,56,2)
(116,35,2)
(56,42,2)
(50,206,2)
(85,102,2)
(87,116,2)
(83,215,2)
(87,102,2)
(110,215,2)
(169,108,2)
(81,215,2)
(48,215,2)
(182,56,2)
(6,85,2)
(172,118,2)
-----------------------------------
(0,ENODEV:)
(1,i)
(2,)
(3,"couldn\'t get sata-phy\\n")
(4,clk)
(5,goto err_out;)
(6,phy)
(7,dev)
(8,dev)
(9,dev)
(10,AHCI_MAX_CLKS)
(11,-EPROBE_DEFER)
(12,dev)
(13,hpriv->phy = devm_phy_get(dev, "sata-phy")
(14,)
(15,mmio)
(16,hpriv)
(17,PTR_ERR(hpriv->phy)
(18,phy)
(19,if (IS_ERR(hpriv->target_pwr)
(20,goto err_out;)
(21,if (rc == -EPROBE_DEFER)
(22,rc = PTR_ERR(clk)
(23,devres_remove_group(dev, NULL)
(24,*dev = &pdev->dev)
(25,hpriv)
(26,target_pwr)
(27,return ERR_PTR(rc)
(28,)
(29,devm_ioremap_resource(dev,\n\\n\\t\\t\\t      platform_get_resource(pdev, IORESOURCE_MEM, 0)
(30,hpriv)
(31,ENOMEM)
(32,dev)
(33,rc = -ENOMEM)
(34,pdev)
(35,clk = clk_get(dev, NULL)
(36,hpriv)
(37,hpriv->phy)
(38,return ERR_PTR(-ENOMEM)
(39,if (IS_ERR(hpriv->phy)
(40,if (rc == -EPROBE_DEFER)
(41,hpriv)
(42,hpriv->phy)
(43,NULL)
(44,hpriv)
(45,)
(46,clks)
(47,of_find_property(dev->of_node, "phys", NULL)
(48,hpriv->target_pwr)
(49,hpriv)
(50,mmio)
(51,hpriv->mmio)
(52,target_pwr)
(53,i)
(54,*hpriv)
(55,dev)
(56,IS_ERR(hpriv->phy)
(57,for (i = 0; i < AHCI_MAX_CLKS; i++)
(58,dev)
(59,IORESOURCE_MEM)
(60,if (!devres_open_group(dev, NULL, GFP_KERNEL)
(61,NULL)
(62,"target")
(63,!devres_open_group(dev, NULL, GFP_KERNEL)
(64,clk)
(65,dev->of_node)
(66,devres_alloc(ahci_platform_put_resources, sizeof(*hpriv)
(67,dev)
(68,if (IS_ERR(clk)
(69,platform_get_resource(pdev, IORESOURCE_MEM, 0)
(70,i)
(71,dev->of_node)
(72,NULL)
(73,dev)
(74,GFP_KERNEL)
(75,ERR_PTR(-ENOMEM)
(76,rc)
(77,-ENOMEM)
(78,hpriv)
(79,pdev->dev)
(80,hpriv->mmio)
(81,IS_ERR(hpriv->target_pwr)
(82,clk)
(83,goto err_out;)
(84,0)
(85,i < AHCI_MAX_CLKS)
(86,pdev)
(87,i++)
(88,dev)
(89,hpriv = devres_alloc(ahci_platform_put_resources, sizeof(*hpriv)
(90,hpriv->mmio)
(91,hpriv->clks[i])
(92,struct platform_device *pdev)
(93,clk)
(94,rc)
(95,target_pwr)
(96,NULL)
(97,devres_add(dev, hpriv)
(98,goto err_out;)
(99,hpriv->target_pwr = NULL)
(100,hpriv->target_pwr)
(101,i)
(102,i = 0)
(103,hpriv)
(104,break;)
(105,goto err_out;)
(106,ENOSYS:)
(107,if (i == 0)
(108,return hpriv;)
(109,i)
(110,target_pwr)
(111,hpriv->phy)
(112,-ENOMEM)
(113,rc = PTR_ERR(hpriv->target_pwr)
(114,default:)
(115,hpriv->clks)
(116,IS_ERR(clk)
(117,hpriv)
(118,PTR_ERR(hpriv->mmio)
(119,goto err_out;)
(120,NULL)
(121,rc == -EPROBE_DEFER)
(122,sizeof(*hpriv)
(123,true)
(124,phy)
(125,0)
(126,hpriv)
(127,hpriv)
(128,rc)
(129,hpriv)
(130,clk)
(131,)
(132,hpriv)
(133,hpriv->clks[i] = clk)
(134,)
(135,rc = PTR_ERR(hpriv->phy)
(136,&pdev->dev)
(137,dev)
(138,hpriv)
(139,ERR_PTR(rc)
(140,got_runtime_pm)
(141,0)
(142,dev)
(143,dev)
(144,hpriv)
(145,if (of_find_property(dev->of_node, "phys", NULL)
(146,PTR_ERR(clk)
(147,PTR_ERR(hpriv->target_pwr)
(148,EPROBE_DEFER:)
(149,"couldn\'t get sata-phy: ENOSYS\\n")
(150,"sata-phy")
(151,rc)
(152,ENOMEM)
(153,i)
(154,NULL)
(155,rc)
(156,if (IS_ERR(hpriv->mmio)
(157,hpriv)
(158,"phys")
(159,hpriv->phy)
(160,i)
(161,dev)
(162,hpriv->target_pwr)
(163,rc)
(164,phy)
(165,dev)
(166,clk_get(dev, NULL)
(167,clk = of_clk_get(dev->of_node, i)
(168,rc)
(169,RET)
(170,devm_regulator_get_optional(dev, "target")
(171,of_node)
(172,rc = PTR_ERR(hpriv->mmio)
(173,goto err_out;)
(174,rc)
(175,EPROBE_DEFER)
(176,"no mmio space\\n")
(177,hpriv->mmio = devm_ioremap_resource(dev,\n\\n\\t\\t\\t      platform_get_resource(pdev, IORESOURCE_MEM, 0)
(178,of_node)
(179,dev)
(180,hpriv)
(181,rc == -EPROBE_DEFER)
(182,NULL)
(183,i == 0)
(184,pm_runtime_enable(dev)
(185,if (!hpriv)
(186,clk)
(187,)
(188,)
(189,break;)
(190,rc)
(191,hpriv->target_pwr = devm_regulator_get_optional(dev, "target")
(192,dev)
(193,err_out:)
(194,hpriv->got_runtime_pm)
(195,dev_err(dev, "couldn\'t get sata-phy\\n")
(196,hpriv->target_pwr)
(197,mmio)
(198,dev_err(dev, "no mmio space\\n")
(199,of_clk_get(dev->of_node, i)
(200,dev)
(201,devres_release_group(dev, NULL)
(202,EPROBE_DEFER)
(203,ahci_platform_put_resources)
(204,GFP_KERNEL)
(205,devm_phy_get(dev, "sata-phy")
(206,!hpriv)
(207,hpriv->phy = NULL)
(208,devres_open_group(dev, NULL, GFP_KERNEL)
(209,dev_err(dev, "couldn\'t get sata-phy: ENOSYS\\n")
(210,rc)
(211,hpriv->got_runtime_pm = true)
(212,-EPROBE_DEFER)
(213,hpriv)
(214,switch (rc)
(215,IS_ERR(hpriv->mmio)
(216,pm_runtime_get_sync(dev)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^