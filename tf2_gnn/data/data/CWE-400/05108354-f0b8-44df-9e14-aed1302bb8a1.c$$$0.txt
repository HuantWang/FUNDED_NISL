-----label-----
1
-----code-----
static int join_queue(char *queuename, struct queue_ent *qe, enum queue_result *reason, int position)
{
	struct call_queue *q;
	struct queue_ent *cur, *prev = NULL;
	int res = -1;
	int pos = 0;
	int inserted = 0;

	if (!(q = find_load_queue_rt_friendly(queuename))) {
		return res;
	}
	ao2_lock(q);

	/* This is our one */
	if (q->joinempty) {
		int status = 0;
		if ((status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty))) {
			*reason = QUEUE_JOINEMPTY;
			ao2_unlock(q);
			queue_t_unref(q, "Done with realtime queue");
			return res;
		}
	}
	if (*reason == QUEUE_UNKNOWN && q->maxlen && (q->count >= q->maxlen)) {
		*reason = QUEUE_FULL;
	} else if (*reason == QUEUE_UNKNOWN) {
		/* There's space for us, put us at the right position inside
		 * the queue.
		 * Take into account the priority of the calling user */
		inserted = 0;
		prev = NULL;
		cur = q->head;
		while (cur) {
			/* We have higher priority than the current user, enter
			 * before him, after all the other users with priority
			 * higher or equal to our priority. */
			if ((!inserted) && (qe->prio > cur->prio)) {
				insert_entry(q, prev, qe, &pos);
				inserted = 1;
			}
			/* <= is necessary for the position comparison because it may not be possible to enter
			 * at our desired position since higher-priority callers may have taken the position we want
			 */
			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {
				insert_entry(q, prev, qe, &pos);
				inserted = 1;
				/*pos is incremented inside insert_entry, so don't need to add 1 here*/
				if (position < pos) {
					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);
				}
			}
			cur->pos = ++pos;
			prev = cur;
			cur = cur->next;
		}
		/* No luck, join at the end of the queue */
		if (!inserted) {
			insert_entry(q, prev, qe, &pos);
		}
		ast_copy_string(qe->moh, q->moh, sizeof(qe->moh));
		ast_copy_string(qe->announce, q->announce, sizeof(qe->announce));
		ast_copy_string(qe->context, q->context, sizeof(qe->context));
		q->count++;
		if (q->count == 1) {
			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);
		}

		res = 0;
		/*** DOCUMENTATION
		<managerEventInstance>
			<synopsis>Raised when a channel joins a Queue.</synopsis>
			<syntax>
				<xi:include xpointer="xpointer(/docs/managerEvent[@name='QueueMemberStatus']/managerEventInstance/syntax/parameter[@name='Queue'])" />
				<parameter name="Position">
					<para>This channel's current position in the queue.</para>
				</parameter>
				<parameter name="Count">
					<para>The total number of channels in the queue.</para>
				</parameter>
			</syntax>
			<see-also>
				<ref type="managerEvent">Leave</ref>
				<ref type="application">Queue</ref>
			</see-also>
		</managerEventInstance>
		***/
		ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",
			"Channel: %s\r\n"
			"CallerIDNum: %s\r\n"
			"CallerIDName: %s\r\n"
			"ConnectedLineNum: %s\r\n"
			"ConnectedLineName: %s\r\n"
			"Queue: %s\r\n"
			"Position: %d\r\n"
			"Count: %d\r\n"
			"Uniqueid: %s\r\n",
			ast_channel_name(qe->chan),
			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */
			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),
			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */
			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),
			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan));
		ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos );
	}
	ao2_unlock(q);
	queue_t_unref(q, "Done with realtime queue");

	return res;
}
-----children-----
1,2
1,3
1,4
3,4
3,5
3,6
3,7
3,8
5,6
5,7
7,8
7,9
10,11
10,12
11,12
13,14
13,15
16,17
16,18
17,18
19,20
19,21
22,23
22,24
24,25
26,27
26,28
26,29
26,30
26,31
26,32
26,33
26,34
26,35
26,36
26,37
26,38
27,28
28,29
28,30
29,30
31,32
31,33
34,35
35,36
35,37
35,38
36,37
38,39
38,40
41,42
41,43
41,44
44,45
45,46
47,48
48,49
48,50
50,51
50,52
52,53
53,54
55,56
56,57
56,58
58,59
58,60
60,61
62,63
63,64
63,65
65,66
65,67
67,68
69,70
69,71
70,71
71,72
72,73
72,74
73,74
75,76
75,77
76,77
78,79
80,81
81,82
82,83
84,85
85,86
85,87
86,87
88,89
90,91
90,92
91,92
91,93
92,93
95,96
95,97
96,97
97,98
97,99
99,100
99,101
101,102
103,104
103,105
104,105
105,106
105,107
106,107
108,109
108,110
108,111
108,112
108,113
109,110
111,112
113,114
113,115
114,115
117,118
117,119
118,119
121,122
121,123
122,123
125,126
125,127
125,128
125,129
126,127
127,128
127,129
128,129
129,130
131,132
133,134
134,135
134,136
135,136
137,138
139,140
140,141
140,142
140,143
141,142
143,144
146,147
147,148
149,150
149,151
149,152
150,151
150,152
151,152
151,153
152,153
152,154
153,154
154,155
156,157
158,159
158,160
159,160
162,163
163,164
163,165
164,165
164,166
165,166
168,169
168,170
169,170
172,173
173,174
174,175
174,176
175,176
176,177
178,179
180,181
180,182
181,182
181,183
182,183
183,184
185,186
187,188
187,189
187,190
187,191
187,192
187,193
187,194
187,195
187,196
187,197
187,198
187,199
187,200
188,189
189,190
189,191
190,191
193,194
194,195
194,196
195,196
197,198
199,200
200,201
200,202
201,202
203,204
203,205
204,205
207,208
207,209
208,209
210,211
210,212
210,213
210,214
210,215
211,212
211,213
212,213
212,214
213,214
214,215
215,216
217,218
218,219
218,220
219,220
219,221
220,221
223,224
223,225
224,225
227,228
227,229
228,229
229,230
229,231
229,232
229,233
229,234
230,231
232,233
234,235
236,237
238,239
239,240
241,242
242,243
242,244
243,244
246,247
246,248
247,248
247,249
248,249
248,250
249,250
249,251
250,251
251,252
253,254
254,255
254,256
255,256
255,257
256,257
259,260
259,261
260,261
263,264
265,266
266,267
266,268
267,268
269,270
269,271
270,271
273,274
273,275
273,276
274,275
275,276
275,277
275,278
275,279
275,280
276,277
278,279
280,281
282,283
284,285
285,286
287,288
288,289
288,290
289,290
292,293
292,294
293,294
293,295
294,295
296,297
298,299
299,300
300,301
300,302
300,303
300,304
300,305
301,302
303,304
306,307
308,309
310,311
311,312
311,313
312,313
312,314
313,314
316,317
317,318
319,320
320,321
320,322
321,322
323,324
325,326
326,327
326,328
327,328
329,330
329,331
330,331
333,334
333,335
334,335
335,336
337,338
338,339
339,340
339,341
339,342
339,343
339,344
340,341
342,343
344,345
346,347
348,349
349,350
351,352
352,353
352,354
352,355
352,356
353,354
355,356
355,357
356,357
359,360
359,361
360,361
363,364
364,365
365,366
365,367
366,367
369,370
370,371
370,372
370,373
370,374
371,372
373,374
373,375
374,375
377,378
377,379
378,379
381,382
382,383
383,384
383,385
384,385
387,388
388,389
388,390
388,391
388,392
389,390
391,392
391,393
392,393
395,396
395,397
396,397
399,400
400,401
401,402
401,403
402,403
405,406
406,407
407,408
407,409
408,409
411,412
411,413
412,413
412,414
413,414
413,415
414,415
418,419
419,420
420,421
420,422
420,423
420,424
421,422
423,424
426,427
426,428
427,428
430,431
431,432
431,433
432,433
435,436
436,437
436,438
436,439
436,440
436,441
436,442
436,443
436,444
436,445
436,446
436,447
436,448
436,449
436,450
437,438
439,440
439,441
440,441
443,444
447,448
447,449
448,449
450,451
450,452
451,452
454,455
454,456
454,457
454,458
455,456
457,458
457,459
458,459
458,460
459,460
459,461
460,461
460,462
461,462
463,464
463,465
464,465
470,471
470,472
471,472
471,473
472,473
472,474
473,474
473,475
474,475
476,477
476,478
477,478
484,485
484,486
484,487
484,488
485,486
487,488
487,489
488,489
488,490
489,490
489,491
490,491
490,492
491,492
493,494
493,495
494,495
500,501
500,502
501,502
501,503
502,503
502,504
503,504
503,505
504,505
506,507
506,508
507,508
514,515
514,516
514,517
514,518
515,516
517,518
517,519
518,519
518,520
519,520
519,521
520,521
520,522
521,522
523,524
523,525
524,525
530,531
530,532
531,532
531,533
532,533
532,534
533,534
533,535
534,535
536,537
536,538
537,538
544,545
544,546
544,547
544,548
545,546
547,548
547,549
548,549
548,550
549,550
549,551
550,551
550,552
551,552
553,554
553,555
554,555
560,561
560,562
561,562
561,563
562,563
562,564
563,564
563,565
564,565
566,567
566,568
567,568
574,575
574,576
575,576
578,579
578,580
579,580
582,583
582,584
583,584
586,587
586,588
587,588
589,590
589,591
590,591
593,594
594,595
594,596
594,597
594,598
594,599
594,600
595,596
599,600
599,601
600,601
603,604
603,605
604,605
606,607
606,608
607,608
610,611
610,612
611,612
614,615
615,616
615,617
616,617
618,619
620,621
621,622
621,623
621,624
622,623
624,625
627,628
628,629
-----nextToken-----
2,4,6,8,9,12,14,15,18,20,21,23,25,30,32,33,37,39,40,42,43,46,49,51,54,57,59,61,64,66,68,74,77,79,83,87,89,93,94,98,100,102,107,110,112,115,116,119,120,123,124,130,132,136,138,142,144,145,148,155,157,160,161,166,167,170,171,177,179,184,186,191,192,196,198,202,205,206,209,216,221,222,225,226,231,233,235,237,240,244,245,252,257,258,261,262,264,268,271,272,277,279,281,283,286,290,291,295,297,302,304,305,307,309,314,315,318,322,324,328,331,332,336,341,343,345,347,350,354,357,358,361,362,367,368,372,375,376,379,380,385,386,390,393,394,397,398,403,404,409,410,415,416,417,422,424,425,428,429,433,434,438,441,442,444,445,446,449,452,453,456,462,465,466,467,468,469,475,478,479,480,481,482,483,486,492,495,496,497,498,499,505,508,509,510,511,512,513,516,522,525,526,527,528,529,535,538,539,540,541,542,543,546,552,555,556,557,558,559,565,568,569,570,571,572,573,576,577,580,581,584,585,588,591,592,596,597,598,601,602,605,608,609,612,613,617,619,623,625,626,629
-----computeFrom-----
72,73
72,74
105,106
105,107
127,128
127,129
150,151
150,152
151,152
151,153
152,153
152,154
163,164
163,165
174,175
174,176
181,182
181,183
189,190
189,191
194,195
194,196
200,201
200,202
212,213
212,214
218,219
218,220
242,243
242,244
247,248
247,249
248,249
248,250
249,250
249,251
254,255
254,256
266,267
266,268
269,270
269,271
288,289
288,290
293,294
293,295
311,312
311,313
320,321
320,322
326,327
326,328
412,413
412,414
431,432
431,433
-----guardedBy-----
155,177
216,244
221,237
252,290
257,283
271,309
268,307
297,309
295,307
415,428
-----guardedByNegation-----
155,184
170,601
157,186
167,585
-----lastLexicalUse-----
155,184
-----jump-----
155,184
-----attribute-----
FunctionDefinition;SimpleDeclSpecifier;FunctionDeclarator;Name;ParameterDeclaration;SimpleDeclSpecifier;Declarator;Pointer;Name;ParameterDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;ParameterDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;ParameterDeclaration;SimpleDeclSpecifier;Declarator;Name;CompoundStatement;DeclarationStatement;SimpleDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;DeclarationStatement;SimpleDeclaration;ElaboratedTypeSpecifier;Name;Declarator;Pointer;Name;Declarator;Pointer;Name;EqualsInitializer;IdExpression;Name;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;EqualsInitializer;UnaryExpression;LiteralExpression;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;EqualsInitializer;LiteralExpression;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;EqualsInitializer;LiteralExpression;IfStatement;UnaryExpression;UnaryExpression;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;ReturnStatement;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IfStatement;FieldReference;IdExpression;Name;Name;CompoundStatement;DeclarationStatement;SimpleDeclaration;SimpleDeclSpecifier;Declarator;Name;EqualsInitializer;LiteralExpression;IfStatement;UnaryExpression;BinaryExpression;IdExpression;Name;FunctionCallExpression;IdExpression;Name;IdExpression;Name;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;BinaryExpression;UnaryExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;ReturnStatement;IdExpression;Name;IfStatement;BinaryExpression;BinaryExpression;BinaryExpression;UnaryExpression;IdExpression;Name;IdExpression;Name;FieldReference;IdExpression;Name;Name;UnaryExpression;BinaryExpression;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;BinaryExpression;UnaryExpression;IdExpression;Name;IdExpression;Name;IfStatement;BinaryExpression;UnaryExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ExpressionStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;WhileStatement;IdExpression;Name;CompoundStatement;IfStatement;BinaryExpression;UnaryExpression;UnaryExpression;IdExpression;Name;UnaryExpression;BinaryExpression;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;IdExpression;Name;UnaryExpression;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;IfStatement;BinaryExpression;BinaryExpression;BinaryExpression;UnaryExpression;IdExpression;Name;UnaryExpression;BinaryExpression;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;IdExpression;Name;UnaryExpression;BinaryExpression;IdExpression;Name;BinaryExpression;IdExpression;Name;LiteralExpression;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;IdExpression;Name;UnaryExpression;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;IfStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;UnaryExpression;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;IfStatement;UnaryExpression;IdExpression;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;IdExpression;Name;UnaryExpression;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;UnaryExpression;UnaryExpression;FieldReference;IdExpression;Name;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;UnaryExpression;UnaryExpression;FieldReference;IdExpression;Name;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;UnaryExpression;UnaryExpression;FieldReference;IdExpression;Name;Name;ExpressionStatement;UnaryExpression;FieldReference;IdExpression;Name;Name;IfStatement;BinaryExpression;FieldReference;IdExpression;Name;Name;LiteralExpression;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;FieldReference;IdExpression;Name;Name;ExpressionStatement;BinaryExpression;IdExpression;Name;LiteralExpression;ExpressionStatement;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;IdExpression;Name;LiteralExpression;LiteralExpression;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;FunctionCallExpression;IdExpression;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;LiteralExpression;FunctionCallExpression;IdExpression;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;LiteralExpression;FunctionCallExpression;IdExpression;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;LiteralExpression;FunctionCallExpression;IdExpression;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;FieldReference;FieldReference;FieldReference;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;Name;Name;Name;LiteralExpression;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;LiteralExpression;LiteralExpression;FieldReference;IdExpression;Name;Name;FunctionCallExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;FieldReference;IdExpression;Name;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;LiteralExpression;ReturnStatement;IdExpression;Name;
-----ast_node-----
static int join_queue(char *queuename, struct queue_ent *qe, enum queue_result *reason, int position){	struct call_queue *q;	struct queue_ent *cur, *prev = NULL;	int res = -1;	int pos = 0;	int inserted = 0;	if (!(q = find_load_queue_rt_friendly(queuename))) {		return res;	}	ao2_lock(q);	/* This is our one */	if (q->joinempty) {		int status = 0;		if ((status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty))) {			*reason = QUEUE_JOINEMPTY;			ao2_unlock(q);			queue_t_unref(q, "Done with realtime queue");			return res;		}	}	if (*reason == QUEUE_UNKNOWN && q->maxlen && (q->count >= q->maxlen)) {		*reason = QUEUE_FULL;	} else if (*reason == QUEUE_UNKNOWN) {		/* There's space for us, put us at the right position inside		 * the queue.		 * Take into account the priority of the calling user */		inserted = 0;		prev = NULL;		cur = q->head;		while (cur) {			/* We have higher priority than the current user, enter			 * before him, after all the other users with priority			 * higher or equal to our priority. */			if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}			/* <= is necessary for the position comparison because it may not be possible to enter			 * at our desired position since higher-priority callers may have taken the position we want			 */			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}			cur->pos = ++pos;			prev = cur;			cur = cur->next;		}		/* No luck, join at the end of the queue */		if (!inserted) {			insert_entry(q, prev, qe, &pos);		}		ast_copy_string(qe->moh, q->moh, sizeof(qe->moh));		ast_copy_string(qe->announce, q->announce, sizeof(qe->announce));		ast_copy_string(qe->context, q->context, sizeof(qe->context));		q->count++;		if (q->count == 1) {			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);		}		res = 0;		/*** DOCUMENTATION		<managerEventInstance>			<synopsis>Raised when a channel joins a Queue.</synopsis>			<syntax>				<xi:include xpointer="xpointer(/docs/managerEvent[@name='QueueMemberStatus']/managerEventInstance/syntax/parameter[@name='Queue'])" />				<parameter name="Position">					<para>This channel's current position in the queue.</para>				</parameter>				<parameter name="Count">					<para>The total number of channels in the queue.</para>				</parameter>			</syntax>			<see-also>				<ref type="managerEvent">Leave</ref>				<ref type="application">Queue</ref>			</see-also>		</managerEventInstance>		***/		ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",			"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n",			ast_channel_name(qe->chan),			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan));		ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos );	}	ao2_unlock(q);	queue_t_unref(q, "Done with realtime queue");	return res;}
static int
join_queue(char *queuename, struct queue_ent *qe, enum queue_result *reason, int position)
join_queue
char *queuename
char
*queuename
*
queuename
struct queue_ent *qe
struct queue_ent
queue_ent
*qe
*
qe
enum queue_result *reason
enum queue_result
queue_result
*reason
*
reason
int position
int
position
position
{	struct call_queue *q;	struct queue_ent *cur, *prev = NULL;	int res = -1;	int pos = 0;	int inserted = 0;	if (!(q = find_load_queue_rt_friendly(queuename))) {		return res;	}	ao2_lock(q);	/* This is our one */	if (q->joinempty) {		int status = 0;		if ((status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty))) {			*reason = QUEUE_JOINEMPTY;			ao2_unlock(q);			queue_t_unref(q, "Done with realtime queue");			return res;		}	}	if (*reason == QUEUE_UNKNOWN && q->maxlen && (q->count >= q->maxlen)) {		*reason = QUEUE_FULL;	} else if (*reason == QUEUE_UNKNOWN) {		/* There's space for us, put us at the right position inside		 * the queue.		 * Take into account the priority of the calling user */		inserted = 0;		prev = NULL;		cur = q->head;		while (cur) {			/* We have higher priority than the current user, enter			 * before him, after all the other users with priority			 * higher or equal to our priority. */			if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}			/* <= is necessary for the position comparison because it may not be possible to enter			 * at our desired position since higher-priority callers may have taken the position we want			 */			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}			cur->pos = ++pos;			prev = cur;			cur = cur->next;		}		/* No luck, join at the end of the queue */		if (!inserted) {			insert_entry(q, prev, qe, &pos);		}		ast_copy_string(qe->moh, q->moh, sizeof(qe->moh));		ast_copy_string(qe->announce, q->announce, sizeof(qe->announce));		ast_copy_string(qe->context, q->context, sizeof(qe->context));		q->count++;		if (q->count == 1) {			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);		}		res = 0;		/*** DOCUMENTATION		<managerEventInstance>			<synopsis>Raised when a channel joins a Queue.</synopsis>			<syntax>				<xi:include xpointer="xpointer(/docs/managerEvent[@name='QueueMemberStatus']/managerEventInstance/syntax/parameter[@name='Queue'])" />				<parameter name="Position">					<para>This channel's current position in the queue.</para>				</parameter>				<parameter name="Count">					<para>The total number of channels in the queue.</para>				</parameter>			</syntax>			<see-also>				<ref type="managerEvent">Leave</ref>				<ref type="application">Queue</ref>			</see-also>		</managerEventInstance>		***/		ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",			"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n",			ast_channel_name(qe->chan),			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan));		ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos );	}	ao2_unlock(q);	queue_t_unref(q, "Done with realtime queue");	return res;}
struct call_queue *q;
struct call_queue *q;
struct call_queue
call_queue
*q
*
q
struct queue_ent *cur, *prev = NULL;
struct queue_ent *cur, *prev = NULL;
struct queue_ent
queue_ent
*cur
*
cur
*prev = NULL
*
prev
= NULL
NULL
NULL
int res = -1;
int res = -1;
int
res = -1
res
= -1
-1
1
int pos = 0;
int pos = 0;
int
pos = 0
pos
= 0
0
int inserted = 0;
int inserted = 0;
int
inserted = 0
inserted
= 0
0
if (!(q = find_load_queue_rt_friendly(queuename))) {		return res;	}
!(q = find_load_queue_rt_friendly(queuename))
(q = find_load_queue_rt_friendly(queuename))
q = find_load_queue_rt_friendly(queuename)
q
q
find_load_queue_rt_friendly(queuename)
find_load_queue_rt_friendly
find_load_queue_rt_friendly
queuename
queuename
{		return res;	}
return res;
res
res
ao2_lock(q);
ao2_lock(q)
ao2_lock
ao2_lock
q
q
if (q->joinempty) {		int status = 0;		if ((status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty))) {			*reason = QUEUE_JOINEMPTY;			ao2_unlock(q);			queue_t_unref(q, "Done with realtime queue");			return res;		}	}
q->joinempty
q
q
joinempty
{		int status = 0;		if ((status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty))) {			*reason = QUEUE_JOINEMPTY;			ao2_unlock(q);			queue_t_unref(q, "Done with realtime queue");			return res;		}	}
int status = 0;
int status = 0;
int
status = 0
status
= 0
0
if ((status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty))) {			*reason = QUEUE_JOINEMPTY;			ao2_unlock(q);			queue_t_unref(q, "Done with realtime queue");			return res;		}
(status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty))
status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty)
status
status
get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty)
get_member_status
get_member_status
q
q
qe->max_penalty
qe
qe
max_penalty
qe->min_penalty
qe
qe
min_penalty
q->joinempty
q
q
joinempty
{			*reason = QUEUE_JOINEMPTY;			ao2_unlock(q);			queue_t_unref(q, "Done with realtime queue");			return res;		}
*reason = QUEUE_JOINEMPTY;
*reason = QUEUE_JOINEMPTY
*reason
reason
reason
QUEUE_JOINEMPTY
QUEUE_JOINEMPTY
ao2_unlock(q);
ao2_unlock(q)
ao2_unlock
ao2_unlock
q
q
queue_t_unref(q, "Done with realtime queue");
queue_t_unref(q, "Done with realtime queue")
queue_t_unref
queue_t_unref
q
q
"Done with realtime queue"
return res;
res
res
if (*reason == QUEUE_UNKNOWN && q->maxlen && (q->count >= q->maxlen)) {		*reason = QUEUE_FULL;	} else if (*reason == QUEUE_UNKNOWN) {		/* There's space for us, put us at the right position inside		 * the queue.		 * Take into account the priority of the calling user */		inserted = 0;		prev = NULL;		cur = q->head;		while (cur) {			/* We have higher priority than the current user, enter			 * before him, after all the other users with priority			 * higher or equal to our priority. */			if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}			/* <= is necessary for the position comparison because it may not be possible to enter			 * at our desired position since higher-priority callers may have taken the position we want			 */			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}			cur->pos = ++pos;			prev = cur;			cur = cur->next;		}		/* No luck, join at the end of the queue */		if (!inserted) {			insert_entry(q, prev, qe, &pos);		}		ast_copy_string(qe->moh, q->moh, sizeof(qe->moh));		ast_copy_string(qe->announce, q->announce, sizeof(qe->announce));		ast_copy_string(qe->context, q->context, sizeof(qe->context));		q->count++;		if (q->count == 1) {			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);		}		res = 0;		/*** DOCUMENTATION		<managerEventInstance>			<synopsis>Raised when a channel joins a Queue.</synopsis>			<syntax>				<xi:include xpointer="xpointer(/docs/managerEvent[@name='QueueMemberStatus']/managerEventInstance/syntax/parameter[@name='Queue'])" />				<parameter name="Position">					<para>This channel's current position in the queue.</para>				</parameter>				<parameter name="Count">					<para>The total number of channels in the queue.</para>				</parameter>			</syntax>			<see-also>				<ref type="managerEvent">Leave</ref>				<ref type="application">Queue</ref>			</see-also>		</managerEventInstance>		***/		ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",			"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n",			ast_channel_name(qe->chan),			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan));		ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos );	}
*reason == QUEUE_UNKNOWN && q->maxlen && (q->count >= q->maxlen)
*reason == QUEUE_UNKNOWN && q->maxlen
*reason == QUEUE_UNKNOWN
*reason
reason
reason
QUEUE_UNKNOWN
QUEUE_UNKNOWN
q->maxlen
q
q
maxlen
(q->count >= q->maxlen)
q->count >= q->maxlen
q->count
q
q
count
q->maxlen
q
q
maxlen
{		*reason = QUEUE_FULL;	}
*reason = QUEUE_FULL;
*reason = QUEUE_FULL
*reason
reason
reason
QUEUE_FULL
QUEUE_FULL
if (*reason == QUEUE_UNKNOWN) {		/* There's space for us, put us at the right position inside		 * the queue.		 * Take into account the priority of the calling user */		inserted = 0;		prev = NULL;		cur = q->head;		while (cur) {			/* We have higher priority than the current user, enter			 * before him, after all the other users with priority			 * higher or equal to our priority. */			if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}			/* <= is necessary for the position comparison because it may not be possible to enter			 * at our desired position since higher-priority callers may have taken the position we want			 */			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}			cur->pos = ++pos;			prev = cur;			cur = cur->next;		}		/* No luck, join at the end of the queue */		if (!inserted) {			insert_entry(q, prev, qe, &pos);		}		ast_copy_string(qe->moh, q->moh, sizeof(qe->moh));		ast_copy_string(qe->announce, q->announce, sizeof(qe->announce));		ast_copy_string(qe->context, q->context, sizeof(qe->context));		q->count++;		if (q->count == 1) {			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);		}		res = 0;		/*** DOCUMENTATION		<managerEventInstance>			<synopsis>Raised when a channel joins a Queue.</synopsis>			<syntax>				<xi:include xpointer="xpointer(/docs/managerEvent[@name='QueueMemberStatus']/managerEventInstance/syntax/parameter[@name='Queue'])" />				<parameter name="Position">					<para>This channel's current position in the queue.</para>				</parameter>				<parameter name="Count">					<para>The total number of channels in the queue.</para>				</parameter>			</syntax>			<see-also>				<ref type="managerEvent">Leave</ref>				<ref type="application">Queue</ref>			</see-also>		</managerEventInstance>		***/		ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",			"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n",			ast_channel_name(qe->chan),			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan));		ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos );	}
*reason == QUEUE_UNKNOWN
*reason
reason
reason
QUEUE_UNKNOWN
QUEUE_UNKNOWN
{		/* There's space for us, put us at the right position inside		 * the queue.		 * Take into account the priority of the calling user */		inserted = 0;		prev = NULL;		cur = q->head;		while (cur) {			/* We have higher priority than the current user, enter			 * before him, after all the other users with priority			 * higher or equal to our priority. */			if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}			/* <= is necessary for the position comparison because it may not be possible to enter			 * at our desired position since higher-priority callers may have taken the position we want			 */			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}			cur->pos = ++pos;			prev = cur;			cur = cur->next;		}		/* No luck, join at the end of the queue */		if (!inserted) {			insert_entry(q, prev, qe, &pos);		}		ast_copy_string(qe->moh, q->moh, sizeof(qe->moh));		ast_copy_string(qe->announce, q->announce, sizeof(qe->announce));		ast_copy_string(qe->context, q->context, sizeof(qe->context));		q->count++;		if (q->count == 1) {			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);		}		res = 0;		/*** DOCUMENTATION		<managerEventInstance>			<synopsis>Raised when a channel joins a Queue.</synopsis>			<syntax>				<xi:include xpointer="xpointer(/docs/managerEvent[@name='QueueMemberStatus']/managerEventInstance/syntax/parameter[@name='Queue'])" />				<parameter name="Position">					<para>This channel's current position in the queue.</para>				</parameter>				<parameter name="Count">					<para>The total number of channels in the queue.</para>				</parameter>			</syntax>			<see-also>				<ref type="managerEvent">Leave</ref>				<ref type="application">Queue</ref>			</see-also>		</managerEventInstance>		***/		ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",			"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n",			ast_channel_name(qe->chan),			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan));		ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos );	}
inserted = 0;
inserted = 0
inserted
inserted
0
prev = NULL;
prev = NULL
prev
prev
NULL
NULL
cur = q->head;
cur = q->head
cur
cur
q->head
q
q
head
while (cur) {			/* We have higher priority than the current user, enter			 * before him, after all the other users with priority			 * higher or equal to our priority. */			if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}			/* <= is necessary for the position comparison because it may not be possible to enter			 * at our desired position since higher-priority callers may have taken the position we want			 */			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}			cur->pos = ++pos;			prev = cur;			cur = cur->next;		}
cur
cur
{			/* We have higher priority than the current user, enter			 * before him, after all the other users with priority			 * higher or equal to our priority. */			if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}			/* <= is necessary for the position comparison because it may not be possible to enter			 * at our desired position since higher-priority callers may have taken the position we want			 */			if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}			cur->pos = ++pos;			prev = cur;			cur = cur->next;		}
if ((!inserted) && (qe->prio > cur->prio)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;			}
(!inserted) && (qe->prio > cur->prio)
(!inserted)
!inserted
inserted
inserted
(qe->prio > cur->prio)
qe->prio > cur->prio
qe->prio
qe
qe
prio
cur->prio
cur
cur
prio
{				insert_entry(q, prev, qe, &pos);				inserted = 1;			}
insert_entry(q, prev, qe, &pos);
insert_entry(q, prev, qe, &pos)
insert_entry
insert_entry
q
q
prev
prev
qe
qe
&pos
pos
pos
inserted = 1;
inserted = 1
inserted
inserted
1
if (!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)) {				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}
!inserted && (qe->prio >= cur->prio) && position && (position <= pos + 1)
!inserted && (qe->prio >= cur->prio) && position
!inserted && (qe->prio >= cur->prio)
!inserted
inserted
inserted
(qe->prio >= cur->prio)
qe->prio >= cur->prio
qe->prio
qe
qe
prio
cur->prio
cur
cur
prio
position
position
(position <= pos + 1)
position <= pos + 1
position
position
pos + 1
pos
pos
1
{				insert_entry(q, prev, qe, &pos);				inserted = 1;				/*pos is incremented inside insert_entry, so don't need to add 1 here*/				if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}			}
insert_entry(q, prev, qe, &pos);
insert_entry(q, prev, qe, &pos)
insert_entry
insert_entry
q
q
prev
prev
qe
qe
&pos
pos
pos
inserted = 1;
inserted = 1
inserted
inserted
1
if (position < pos) {					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}
position < pos
position
position
pos
pos
{					ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);				}
ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos);
ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\n", position, pos)
ast_log
ast_log
LOG_NOTICE
LOG_NOTICE
"Asked to be inserted at position %d but forced into position %d due to higher priority callers\n"
position
position
pos
pos
cur->pos = ++pos;
cur->pos = ++pos
cur->pos
cur
cur
pos
++pos
pos
pos
prev = cur;
prev = cur
prev
prev
cur
cur
cur = cur->next;
cur = cur->next
cur
cur
cur->next
cur
cur
next
if (!inserted) {			insert_entry(q, prev, qe, &pos);		}
!inserted
inserted
inserted
{			insert_entry(q, prev, qe, &pos);		}
insert_entry(q, prev, qe, &pos);
insert_entry(q, prev, qe, &pos)
insert_entry
insert_entry
q
q
prev
prev
qe
qe
&pos
pos
pos
ast_copy_string(qe->moh, q->moh, sizeof(qe->moh));
ast_copy_string(qe->moh, q->moh, sizeof(qe->moh))
ast_copy_string
ast_copy_string
qe->moh
qe
qe
moh
q->moh
q
q
moh
sizeof(qe->moh)
(qe->moh)
qe->moh
qe
qe
moh
ast_copy_string(qe->announce, q->announce, sizeof(qe->announce));
ast_copy_string(qe->announce, q->announce, sizeof(qe->announce))
ast_copy_string
ast_copy_string
qe->announce
qe
qe
announce
q->announce
q
q
announce
sizeof(qe->announce)
(qe->announce)
qe->announce
qe
qe
announce
ast_copy_string(qe->context, q->context, sizeof(qe->context));
ast_copy_string(qe->context, q->context, sizeof(qe->context))
ast_copy_string
ast_copy_string
qe->context
qe
qe
context
q->context
q
q
context
sizeof(qe->context)
(qe->context)
qe->context
qe
qe
context
q->count++;
q->count++
q->count
q
q
count
if (q->count == 1) {			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);		}
q->count == 1
q->count
q
q
count
1
{			ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);		}
ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name);
ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name)
ast_devstate_changed
ast_devstate_changed
AST_DEVICE_RINGING
AST_DEVICE_RINGING
"Queue:%s"
q->name
q
q
name
res = 0;
res = 0
res
res
0
ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",			"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n",			ast_channel_name(qe->chan),			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan));
ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",			"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n",			ast_channel_name(qe->chan),			S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown"),			S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown"),/* XXX somewhere else it is <unknown> */			S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown"),			q->name, qe->pos, q->count, ast_channel_uniqueid(qe->chan))
ast_manager_event
ast_manager_event
qe->chan
qe
qe
chan
EVENT_FLAG_CALL
EVENT_FLAG_CALL
"Join"
"Channel: %s\r\n"			"CallerIDNum: %s\r\n"			"CallerIDName: %s\r\n"			"ConnectedLineNum: %s\r\n"			"ConnectedLineName: %s\r\n"			"Queue: %s\r\n"			"Position: %d\r\n"			"Count: %d\r\n"			"Uniqueid: %s\r\n"
ast_channel_name(qe->chan)
ast_channel_name
ast_channel_name
qe->chan
qe
qe
chan
S_COR(ast_channel_caller(qe->chan)->id.number.valid, ast_channel_caller(qe->chan)->id.number.str, "unknown")
S_COR
S_COR
ast_channel_caller(qe->chan)->id.number.valid
ast_channel_caller(qe->chan)->id.number
ast_channel_caller(qe->chan)->id
ast_channel_caller(qe->chan)
ast_channel_caller
ast_channel_caller
qe->chan
qe
qe
chan
id
number
valid
ast_channel_caller(qe->chan)->id.number.str
ast_channel_caller(qe->chan)->id.number
ast_channel_caller(qe->chan)->id
ast_channel_caller(qe->chan)
ast_channel_caller
ast_channel_caller
qe->chan
qe
qe
chan
id
number
str
"unknown"
S_COR(ast_channel_caller(qe->chan)->id.name.valid, ast_channel_caller(qe->chan)->id.name.str, "unknown")
S_COR
S_COR
ast_channel_caller(qe->chan)->id.name.valid
ast_channel_caller(qe->chan)->id.name
ast_channel_caller(qe->chan)->id
ast_channel_caller(qe->chan)
ast_channel_caller
ast_channel_caller
qe->chan
qe
qe
chan
id
name
valid
ast_channel_caller(qe->chan)->id.name.str
ast_channel_caller(qe->chan)->id.name
ast_channel_caller(qe->chan)->id
ast_channel_caller(qe->chan)
ast_channel_caller
ast_channel_caller
qe->chan
qe
qe
chan
id
name
str
"unknown"
S_COR(ast_channel_connected(qe->chan)->id.number.valid, ast_channel_connected(qe->chan)->id.number.str, "unknown")
S_COR
S_COR
ast_channel_connected(qe->chan)->id.number.valid
ast_channel_connected(qe->chan)->id.number
ast_channel_connected(qe->chan)->id
ast_channel_connected(qe->chan)
ast_channel_connected
ast_channel_connected
qe->chan
qe
qe
chan
id
number
valid
ast_channel_connected(qe->chan)->id.number.str
ast_channel_connected(qe->chan)->id.number
ast_channel_connected(qe->chan)->id
ast_channel_connected(qe->chan)
ast_channel_connected
ast_channel_connected
qe->chan
qe
qe
chan
id
number
str
"unknown"
S_COR(ast_channel_connected(qe->chan)->id.name.valid, ast_channel_connected(qe->chan)->id.name.str, "unknown")
S_COR
S_COR
ast_channel_connected(qe->chan)->id.name.valid
ast_channel_connected(qe->chan)->id.name
ast_channel_connected(qe->chan)->id
ast_channel_connected(qe->chan)
ast_channel_connected
ast_channel_connected
qe->chan
qe
qe
chan
id
name
valid
ast_channel_connected(qe->chan)->id.name.str
ast_channel_connected(qe->chan)->id.name
ast_channel_connected(qe->chan)->id
ast_channel_connected(qe->chan)
ast_channel_connected
ast_channel_connected
qe->chan
qe
qe
chan
id
name
str
"unknown"
q->name
q
q
name
qe->pos
qe
qe
pos
q->count
q
q
count
ast_channel_uniqueid(qe->chan)
ast_channel_uniqueid
ast_channel_uniqueid
qe->chan
qe
qe
chan
ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos );
ast_debug(1, "Queue '%s' Join, Channel '%s', Position '%d'\n", q->name, ast_channel_name(qe->chan), qe->pos )
ast_debug
ast_debug
1
"Queue '%s' Join, Channel '%s', Position '%d'\n"
q->name
q
q
name
ast_channel_name(qe->chan)
ast_channel_name
ast_channel_name
qe->chan
qe
qe
chan
qe->pos
qe
qe
pos
ao2_unlock(q);
ao2_unlock(q)
ao2_unlock
ao2_unlock
q
q
queue_t_unref(q, "Done with realtime queue");
queue_t_unref(q, "Done with realtime queue")
queue_t_unref
queue_t_unref
q
q
"Done with realtime queue"
return res;
res
res
-----joern-----
(121,261,0)
(371,115,0)
(172,213,0)
(266,161,0)
(120,66,0)
(61,347,0)
(331,219,0)
(83,23,0)
(361,254,0)
(17,349,0)
(112,115,0)
(294,176,0)
(50,206,0)
(34,26,0)
(357,339,0)
(296,351,0)
(150,350,0)
(288,160,0)
(307,66,0)
(48,331,0)
(364,238,0)
(262,86,0)
(338,236,0)
(255,309,0)
(149,110,0)
(219,331,0)
(250,136,0)
(323,20,0)
(337,104,0)
(39,127,0)
(100,293,0)
(315,160,0)
(353,20,0)
(33,234,0)
(216,379,0)
(140,20,0)
(344,131,0)
(258,135,0)
(257,296,0)
(277,140,0)
(249,373,0)
(82,170,0)
(356,140,0)
(311,161,0)
(283,339,0)
(194,185,0)
(79,369,0)
(110,355,0)
(244,252,0)
(28,273,0)
(323,34,0)
(9,118,0)
(246,147,0)
(237,189,0)
(5,371,0)
(291,216,0)
(135,342,0)
(352,170,0)
(321,219,0)
(302,38,0)
(5,19,0)
(226,350,0)
(15,96,0)
(11,160,0)
(341,249,0)
(292,160,0)
(115,371,0)
(346,160,0)
(312,160,0)
(215,34,0)
(203,43,0)
(266,279,0)
(25,20,0)
(12,271,0)
(331,98,0)
(366,310,0)
(359,160,0)
(271,160,0)
(69,271,0)
(373,249,0)
(380,211,0)
(76,257,0)
(34,215,0)
(183,342,0)
(273,339,0)
(292,339,0)
(115,112,0)
(58,68,0)
(42,60,0)
(306,116,0)
(46,248,0)
(34,19,0)
(131,184,0)
(286,119,0)
(226,135,0)
(137,80,0)
(158,253,0)
(193,243,0)
(248,212,0)
(243,160,0)
(263,234,0)
(37,119,0)
(283,142,0)
(44,20,0)
(159,173,0)
(202,97,0)
(367,188,0)
(244,214,0)
(51,22,0)
(353,183,0)
(93,34,0)
(166,225,0)
(96,34,0)
(104,224,0)
(254,362,0)
(122,215,0)
(370,339,0)
(355,110,0)
(379,216,0)
(8,20,0)
(58,310,0)
(62,89,0)
(326,350,0)
(16,75,0)
(290,20,0)
(43,66,0)
(89,20,0)
(242,362,0)
(4,247,0)
(34,323,0)
(36,89,0)
(347,151,0)
(170,149,0)
(21,260,0)
(363,236,0)
(13,115,0)
(374,183,0)
(368,311,0)
(75,239,0)
(97,52,0)
(8,260,0)
(215,339,0)
(167,178,0)
(86,339,0)
(96,15,0)
(206,160,0)
(296,257,0)
(344,14,0)
(372,44,0)
(239,169,0)
(119,20,0)
(316,292,0)
(261,182,0)
(235,197,0)
(139,281,0)
(379,96,0)
(70,347,0)
(26,34,0)
(136,125,0)
(1,21,0)
(42,86,0)
(100,309,0)
(38,373,0)
(197,339,0)
(131,344,0)
(371,5,0)
(70,212,0)
(157,23,0)
(178,142,0)
(302,221,0)
(48,100,0)
(207,290,0)
(266,217,0)
(243,339,0)
(353,270,0)
(232,221,0)
(205,252,0)
(154,58,0)
(47,116,0)
(147,342,0)
(189,200,0)
(182,20,0)
(241,34,0)
(221,302,0)
(248,293,0)
(208,290,0)
(127,142,0)
(209,70,0)
(3,107,0)
(280,371,0)
(80,271,0)
(305,116,0)
(290,112,0)
(107,3,0)
(34,116,0)
(229,271,0)
(304,48,0)
(362,339,0)
(183,98,0)
(234,369,0)
(260,8,0)
(276,266,0)
(369,336,0)
(253,52,0)
(296,116,0)
(333,53,0)
(17,380,0)
(297,339,0)
(217,266,0)
(308,89,0)
(26,339,0)
(266,20,0)
(38,302,0)
(266,339,0)
(77,259,0)
(48,342,0)
(164,160,0)
(188,212,0)
(247,131,0)
(153,167,0)
(265,331,0)
(263,22,0)
(214,244,0)
(233,360,0)
(358,257,0)
(118,20,0)
(18,98,0)
(310,366,0)
(53,339,0)
(293,100,0)
(32,178,0)
(266,183,0)
(199,323,0)
(214,172,0)
(198,249,0)
(29,353,0)
(248,285,0)
(343,25,0)
(12,311,0)
(108,271,0)
(165,184,0)
(177,135,0)
(179,283,0)
(134,34,0)
(322,20,0)
(213,172,0)
(169,239,0)
(183,331,0)
(172,226,0)
(173,142,0)
(131,116,0)
(145,342,0)
(111,253,0)
(339,357,0)
(84,197,0)
(184,131,0)
(229,200,0)
(181,11,0)
(174,182,0)
(360,20,0)
(249,339,0)
(189,271,0)
(171,192,0)
(229,71,0)
(176,160,0)
(311,151,0)
(104,308,0)
(72,375,0)
(348,232,0)
(369,234,0)
(269,124,0)
(244,200,0)
(34,96,0)
(228,339,0)
(336,369,0)
(34,263,0)
(40,313,0)
(353,80,0)
(212,270,0)
(85,16,0)
(163,379,0)
(300,151,0)
(110,149,0)
(225,34,0)
(161,116,0)
(287,192,0)
(128,287,0)
(272,185,0)
(293,248,0)
(16,21,0)
(289,42,0)
(360,305,0)
(322,54,0)
(267,34,0)
(328,12,0)
(329,353,0)
(184,20,0)
(231,252,0)
(114,5,0)
(313,107,0)
(218,322,0)
(362,254,0)
(23,20,0)
(91,118,0)
(100,48,0)
(345,96,0)
(263,34,0)
(146,244,0)
(127,339,0)
(196,229,0)
(216,375,0)
(342,116,0)
(35,370,0)
(14,344,0)
(117,263,0)
(225,20,0)
(260,21,0)
(30,312,0)
(59,285,0)
(224,104,0)
(19,238,0)
(192,287,0)
(105,318,0)
(309,100,0)
(22,3,0)
(15,68,0)
(187,173,0)
(88,219,0)
(45,229,0)
(355,169,0)
(281,339,0)
(167,349,0)
(136,312,0)
(365,183,0)
(22,263,0)
(3,22,0)
(268,312,0)
(188,347,0)
(68,58,0)
(214,200,0)
(188,285,0)
(273,305,0)
(168,75,0)
(23,267,0)
(31,357,0)
(287,349,0)
(277,336,0)
(252,271,0)
(223,124,0)
(24,14,0)
(325,353,0)
(336,277,0)
(377,355,0)
(366,20,0)
(217,271,0)
(152,169,0)
(308,104,0)
(149,170,0)
(299,160,0)
(81,311,0)
(327,339,0)
(65,20,0)
(155,285,0)
(147,339,0)
(34,267,0)
(162,362,0)
(140,277,0)
(141,224,0)
(109,68,0)
(285,116,0)
(230,86,0)
(44,372,0)
(201,311,0)
(227,206,0)
(143,147,0)
(362,25,0)
(123,160,0)
(0,26,0)
(176,312,0)
(373,228,0)
(245,53,0)
(314,247,0)
(130,305,0)
(70,285,0)
(107,313,0)
(261,318,0)
(340,266,0)
(195,44,0)
(319,65,0)
(135,331,0)
(378,347,0)
(376,8,0)
(224,238,0)
(89,308,0)
(359,339,0)
(106,110,0)
(236,38,0)
(70,213,0)
(222,98,0)
(350,226,0)
(185,116,0)
(311,12,0)
(118,351,0)
(210,359,0)
(52,98,0)
(186,242,0)
(296,119,0)
(95,44,0)
(362,53,0)
(353,161,0)
(252,244,0)
(239,34,0)
(351,296,0)
(284,160,0)
(226,172,0)
(94,217,0)
(318,339,0)
(317,42,0)
(102,184,0)
(86,42,0)
(330,160,0)
(144,34,0)
(310,58,0)
(320,19,0)
(130,65,0)
(240,127,0)
(52,97,0)
(113,14,0)
(303,107,0)
(221,232,0)
(298,116,0)
(253,331,0)
(242,20,0)
(351,118,0)
(313,40,0)
(14,20,0)
(7,160,0)
(278,189,0)
(93,124,0)
(54,375,0)
(40,20,0)
(251,215,0)
(238,224,0)
(228,373,0)
(238,19,0)
(309,20,0)
(219,342,0)
(92,225,0)
(176,185,0)
(234,263,0)
(90,30,0)
(342,147,0)
(362,242,0)
(38,236,0)
(131,247,0)
(191,17,0)
(301,261,0)
(126,322,0)
(275,309,0)
(49,48,0)
(236,339,0)
(135,226,0)
(332,243,0)
(257,339,0)
(247,339,0)
(129,43,0)
(267,23,0)
(274,239,0)
(124,20,0)
(354,161,0)
(232,349,0)
(55,140,0)
(124,93,0)
(133,212,0)
(97,271,0)
(350,20,0)
(6,25,0)
(235,116,0)
(311,339,0)
(172,214,0)
(173,312,0)
(53,362,0)
(375,216,0)
(99,15,0)
(182,261,0)
(353,339,0)
(119,296,0)
(96,379,0)
(204,323,0)
(261,372,0)
(67,26,0)
(34,93,0)
(170,20,0)
(311,183,0)
(295,380,0)
(87,366,0)
(282,161,0)
(132,366,0)
(169,355,0)
(34,239,0)
(10,228,0)
(75,16,0)
(248,347,0)
(220,228,0)
(74,318,0)
(213,70,0)
(2,8,0)
(197,235,0)
(65,130,0)
(261,116,0)
(34,225,0)
(175,40,0)
(305,130,0)
(57,370,0)
(56,281,0)
(148,229,0)
(80,353,0)
(253,342,0)
(112,290,0)
(324,212,0)
(25,362,0)
(334,182,0)
(312,30,0)
(159,176,0)
(138,40,0)
(41,242,0)
(78,3,0)
(375,54,0)
(373,38,0)
(311,20,0)
(159,136,0)
(27,221,0)
(259,281,0)
(305,360,0)
(180,197,0)
(239,75,0)
(372,261,0)
(19,5,0)
(54,322,0)
(73,11,0)
(63,266,0)
(190,360,0)
(357,256,0)
(101,214,0)
(305,273,0)
(68,15,0)
(21,16,0)
(19,34,0)
(264,65,0)
(156,336,0)
(339,297,0)
(64,229,0)
(318,261,0)
(281,259,0)
(335,273,0)
(171,287,1)
(2,169,1)
(10,220,1)
(217,271,1)
(238,224,1)
(334,372,1)
(356,239,1)
(195,318,1)
(251,122,1)
(122,19,1)
(187,127,1)
(275,255,1)
(310,366,1)
(312,30,1)
(153,254,1)
(88,265,1)
(350,20,1)
(134,144,1)
(172,226,1)
(329,29,1)
(168,16,1)
(241,134,1)
(319,273,1)
(244,200,1)
(147,339,1)
(68,109,1)
(295,17,1)
(362,242,1)
(323,199,1)
(261,372,1)
(218,263,1)
(283,339,1)
(152,355,1)
(78,107,1)
(121,34,1)
(239,274,1)
(76,119,1)
(155,192,1)
(146,101,1)
(367,103,1)
(174,334,1)
(316,261,1)
(363,221,1)
(109,58,1)
(167,153,1)
(129,370,1)
(15,99,1)
(263,22,1)
(149,170,1)
(163,216,1)
(376,2,1)
(266,161,1)
(96,345,1)
(311,183,1)
(285,59,1)
(380,295,1)
(366,132,1)
(316,192,1)
(309,20,1)
(59,155,1)
(253,342,1)
(336,156,1)
(209,293,1)
(281,56,1)
(189,271,1)
(32,167,1)
(272,259,1)
(265,183,1)
(308,89,1)
(328,201,1)
(53,339,1)
(340,276,1)
(375,54,1)
(311,161,1)
(362,53,1)
(22,51,1)
(278,347,1)
(124,20,1)
(324,353,1)
(225,20,1)
(21,1,1)
(234,33,1)
(127,39,1)
(175,138,1)
(185,194,1)
(38,373,1)
(219,321,1)
(117,22,1)
(33,369,1)
(40,20,1)
(263,117,1)
(111,213,1)
(192,287,1)
(183,331,1)
(57,359,1)
(188,212,1)
(235,197,1)
(44,20,1)
(276,63,1)
(5,371,1)
(141,104,1)
(170,82,1)
(190,233,1)
(34,267,1)
(140,55,1)
(366,20,1)
(355,377,1)
(225,92,1)
(379,216,1)
(184,20,1)
(339,357,1)
(257,358,1)
(219,331,1)
(183,365,1)
(177,350,1)
(176,185,1)
(39,240,1)
(249,198,1)
(290,207,1)
(93,124,1)
(287,349,1)
(379,163,1)
(34,215,1)
(228,339,1)
(35,57,1)
(79,336,1)
(233,266,1)
(82,352,1)
(14,20,1)
(11,181,1)
(165,102,1)
(206,50,1)
(305,273,1)
(261,182,1)
(15,68,1)
(239,75,1)
(353,161,1)
(34,239,1)
(154,310,1)
(40,175,1)
(326,150,1)
(140,20,1)
(214,101,1)
(159,136,1)
(236,339,1)
(176,294,1)
(188,285,1)
(80,137,1)
(257,339,1)
(311,12,1)
(240,283,1)
(231,205,1)
(236,338,1)
(29,293,1)
(335,360,1)
(360,190,1)
(262,230,1)
(145,161,1)
(25,20,1)
(45,189,1)
(156,277,1)
(183,342,1)
(178,32,1)
(95,195,1)
(361,43,1)
(46,103,1)
(202,253,1)
(253,331,1)
(370,35,1)
(30,90,1)
(359,339,1)
(13,112,1)
(303,313,1)
(119,20,1)
(14,113,1)
(305,130,1)
(246,143,1)
(100,309,1)
(268,206,1)
(3,78,1)
(365,374,1)
(77,281,1)
(90,268,1)
(267,23,1)
(106,149,1)
(124,269,1)
(248,46,1)
(100,48,1)
(357,31,1)
(318,339,1)
(327,11,1)
(207,208,1)
(210,297,1)
(188,347,1)
(167,349,1)
(36,62,1)
(224,141,1)
(126,218,1)
(311,20,1)
(289,259,1)
(247,4,1)
(292,339,1)
(344,14,1)
(348,370,1)
(263,234,1)
(264,319,1)
(128,302,1)
(351,118,1)
(26,67,1)
(214,200,1)
(283,179,1)
(17,349,1)
(115,112,1)
(103,331,1)
(338,363,1)
(322,126,1)
(172,214,1)
(220,249,1)
(21,260,1)
(215,251,1)
(255,248,1)
(189,200,1)
(173,312,1)
(258,177,1)
(373,228,1)
(224,104,1)
(245,333,1)
(68,58,1)
(302,38,1)
(271,108,1)
(332,193,1)
(282,354,1)
(233,188,1)
(345,15,1)
(8,20,1)
(368,81,1)
(353,339,1)
(169,355,1)
(371,280,1)
(277,140,1)
(96,379,1)
(203,129,1)
(12,271,1)
(110,149,1)
(266,217,1)
(176,312,1)
(182,20,1)
(74,301,1)
(269,223,1)
(215,339,1)
(325,329,1)
(234,369,1)
(242,41,1)
(110,106,1)
(67,0,1)
(237,278,1)
(259,77,1)
(362,339,1)
(197,180,1)
(199,204,1)
(249,339,1)
(217,94,1)
(213,172,1)
(374,52,1)
(322,20,1)
(186,162,1)
(159,173,1)
(229,64,1)
(63,188,1)
(311,339,1)
(228,10,1)
(102,305,1)
(313,40,1)
(24,247,1)
(86,339,1)
(34,93,1)
(305,360,1)
(0,323,1)
(131,184,1)
(189,237,1)
(55,356,1)
(362,25,1)
(188,367,1)
(113,24,1)
(296,119,1)
(253,158,1)
(65,264,1)
(9,257,1)
(70,212,1)
(221,27,1)
(318,105,1)
(130,65,1)
(26,339,1)
(353,20,1)
(97,202,1)
(354,285,1)
(115,13,1)
(4,314,1)
(252,271,1)
(348,254,1)
(16,21,1)
(371,115,1)
(357,256,1)
(73,271,1)
(273,339,1)
(62,96,1)
(48,49,1)
(51,3,1)
(173,187,1)
(353,183,1)
(364,224,1)
(70,347,1)
(161,282,1)
(166,185,1)
(370,339,1)
(333,25,1)
(254,362,1)
(138,234,1)
(309,275,1)
(321,88,1)
(43,203,1)
(157,26,1)
(238,364,1)
(89,20,1)
(147,246,1)
(226,350,1)
(64,196,1)
(119,286,1)
(107,303,1)
(34,323,1)
(107,313,1)
(23,83,1)
(135,331,1)
(96,15,1)
(105,74,1)
(229,271,1)
(296,257,1)
(19,238,1)
(293,100,1)
(5,114,1)
(223,241,1)
(111,189,1)
(61,311,1)
(170,20,1)
(248,285,1)
(49,304,1)
(192,171,1)
(337,308,1)
(19,5,1)
(266,20,1)
(136,312,1)
(27,232,1)
(150,70,1)
(260,8,1)
(111,229,1)
(180,84,1)
(58,310,1)
(70,285,1)
(320,5,1)
(274,75,1)
(25,6,1)
(229,200,1)
(144,225,1)
(56,139,1)
(19,320,1)
(242,20,1)
(179,178,1)
(34,19,1)
(22,3,1)
(28,335,1)
(86,262,1)
(232,348,1)
(341,236,1)
(70,209,1)
(184,165,1)
(302,221,1)
(287,128,1)
(87,379,1)
(342,147,1)
(355,110,1)
(205,146,1)
(244,252,1)
(221,232,1)
(291,375,1)
(12,328,1)
(280,115,1)
(143,145,1)
(232,349,1)
(281,339,1)
(197,339,1)
(34,225,1)
(230,317,1)
(317,289,1)
(99,68,1)
(301,121,1)
(375,72,1)
(369,336,1)
(353,80,1)
(112,290,1)
(252,231,1)
(181,73,1)
(34,26,1)
(148,45,1)
(48,331,1)
(377,110,1)
(58,154,1)
(52,97,1)
(247,339,1)
(1,260,1)
(196,148,1)
(83,157,1)
(347,378,1)
(369,79,1)
(250,297,1)
(292,316,1)
(3,107,1)
(94,340,1)
(336,277,1)
(296,351,1)
(75,168,1)
(91,9,1)
(358,76,1)
(314,184,1)
(266,183,1)
(273,28,1)
(108,69,1)
(316,380,1)
(359,210,1)
(272,42,1)
(34,263,1)
(350,326,1)
(360,20,1)
(131,247,1)
(16,85,1)
(44,95,1)
(266,339,1)
(41,186,1)
(286,37,1)
(6,343,1)
(239,169,1)
(191,302,1)
(198,341,1)
(89,36,1)
(204,215,1)
(297,339,1)
(139,235,1)
(212,133,1)
(85,21,1)
(162,361,1)
(127,339,1)
(8,376,1)
(118,91,1)
(248,347,1)
(214,244,1)
(219,342,1)
(38,236,1)
(34,96,1)
(213,70,1)
(135,342,1)
(97,271,1)
(75,16,1)
(101,226,1)
(194,272,1)
(92,166,1)
(243,332,1)
(50,227,1)
(193,292,1)
(294,243,1)
(248,212,1)
(331,219,1)
(80,271,1)
(118,20,1)
(208,238,1)
(158,111,1)
(69,312,1)
(104,337,1)
(48,342,1)
(259,281,1)
(169,152,1)
(72,54,1)
(37,131,1)
(226,135,1)
(114,371,1)
(323,20,1)
(243,339,1)
(42,86,1)
(103,342,1)
(23,20,1)
(182,174,1)
(261,318,1)
(352,93,1)
(65,20,1)
(17,191,1)
(135,258,1)
(378,61,1)
(136,250,1)
(84,296,1)
(31,327,1)
(304,309,1)
(54,322,1)
(343,242,1)
(293,248,1)
(131,344,1)
(201,368,1)
(132,87,1)
(290,20,1)
(216,375,1)
(373,249,1)
(133,324,1)
(216,291,1)
(53,245,1)
(372,44,1)
(209,212,1)
(81,213,1)
(137,325,1)
(159,176,1)
(104,308,1)
(260,192,2)
(281,339,2)
(209,103,2)
(344,192,2)
(188,192,2)
(367,192,2)
(100,309,2)
(213,70,2)
(58,192,2)
(362,53,2)
(130,192,2)
(361,370,2)
(260,8,2)
(187,254,2)
(320,192,2)
(70,103,2)
(253,331,2)
(168,192,2)
(190,192,2)
(72,192,2)
(154,192,2)
(247,339,2)
(127,339,2)
(266,339,2)
(334,192,2)
(262,259,2)
(63,188,2)
(78,192,2)
(336,277,2)
(163,192,2)
(61,213,2)
(371,115,2)
(3,192,2)
(196,189,2)
(48,331,2)
(239,75,2)
(56,192,2)
(368,213,2)
(51,192,2)
(101,226,2)
(350,20,2)
(140,20,2)
(17,349,2)
(126,192,2)
(146,101,2)
(311,20,2)
(166,192,2)
(245,370,2)
(208,192,2)
(308,89,2)
(365,103,2)
(219,331,2)
(149,192,2)
(302,38,2)
(48,248,2)
(379,192,2)
(369,336,2)
(267,192,2)
(118,20,2)
(292,254,2)
(266,20,2)
(115,112,2)
(295,302,2)
(22,192,2)
(26,339,2)
(351,192,2)
(189,271,2)
(347,213,2)
(293,103,2)
(277,140,2)
(292,339,2)
(173,254,2)
(249,236,2)
(147,339,2)
(340,188,2)
(65,192,2)
(38,221,2)
(150,70,2)
(110,149,2)
(247,192,2)
(321,103,2)
(311,213,2)
(338,221,2)
(375,192,2)
(378,213,2)
(92,192,2)
(216,192,2)
(53,370,2)
(8,20,2)
(239,169,2)
(86,259,2)
(137,293,2)
(43,370,2)
(197,192,2)
(316,370,2)
(219,103,2)
(100,48,2)
(141,192,2)
(261,192,2)
(353,161,2)
(88,103,2)
(1,192,2)
(317,259,2)
(104,308,2)
(144,192,2)
(358,192,2)
(38,373,2)
(138,192,2)
(34,192,2)
(310,366,2)
(324,293,2)
(359,297,2)
(21,192,2)
(289,259,2)
(167,349,2)
(97,103,2)
(287,302,2)
(244,252,2)
(291,192,2)
(348,254,2)
(282,192,2)
(337,192,2)
(308,192,2)
(14,192,2)
(353,183,2)
(44,20,2)
(107,313,2)
(259,192,2)
(342,147,2)
(136,312,2)
(331,219,2)
(305,192,2)
(232,254,2)
(210,297,2)
(267,23,2)
(68,58,2)
(16,192,2)
(135,70,2)
(191,302,2)
(176,254,2)
(373,249,2)
(293,248,2)
(162,370,2)
(117,192,2)
(372,44,2)
(373,236,2)
(244,101,2)
(161,192,2)
(311,12,2)
(29,293,2)
(224,104,2)
(205,101,2)
(189,213,2)
(93,124,2)
(275,248,2)
(153,254,2)
(188,285,2)
(34,96,2)
(242,370,2)
(207,192,2)
(68,192,2)
(57,297,2)
(145,192,2)
(9,192,2)
(79,192,2)
(221,232,2)
(170,20,2)
(97,271,2)
(167,254,2)
(184,192,2)
(375,54,2)
(248,347,2)
(149,170,2)
(103,103,2)
(302,254,2)
(94,188,2)
(296,257,2)
(373,228,2)
(359,339,2)
(52,103,2)
(91,192,2)
(42,86,2)
(37,192,2)
(172,70,2)
(230,259,2)
(119,192,2)
(313,40,2)
(169,192,2)
(264,192,2)
(77,192,2)
(257,192,2)
(96,192,2)
(322,20,2)
(374,103,2)
(12,213,2)
(115,192,2)
(25,20,2)
(232,349,2)
(278,213,2)
(198,236,2)
(296,192,2)
(362,370,2)
(86,339,2)
(314,192,2)
(34,93,2)
(276,188,2)
(216,375,2)
(360,192,2)
(212,293,2)
(250,297,2)
(112,192,2)
(272,192,2)
(96,379,2)
(185,192,2)
(248,212,2)
(234,192,2)
(44,192,2)
(175,192,2)
(89,192,2)
(263,234,2)
(266,161,2)
(39,254,2)
(360,20,2)
(377,192,2)
(305,130,2)
(316,254,2)
(243,370,2)
(283,254,2)
(147,192,2)
(119,20,2)
(81,213,2)
(54,192,2)
(329,293,2)
(176,185,2)
(130,65,2)
(253,342,2)
(80,271,2)
(83,192,2)
(193,254,2)
(213,172,2)
(113,192,2)
(332,370,2)
(23,20,2)
(62,192,2)
(114,192,2)
(323,20,2)
(152,192,2)
(75,16,2)
(225,20,2)
(134,192,2)
(155,192,2)
(249,339,2)
(254,362,2)
(80,293,2)
(33,192,2)
(58,310,2)
(55,192,2)
(111,103,2)
(286,192,2)
(226,135,2)
(184,20,2)
(188,347,2)
(243,339,2)
(221,370,2)
(342,192,2)
(148,189,2)
(301,192,2)
(48,342,2)
(355,192,2)
(239,192,2)
(232,370,2)
(238,224,2)
(173,312,2)
(21,260,2)
(303,192,2)
(193,370,2)
(266,217,2)
(159,173,2)
(195,192,2)
(242,20,2)
(36,192,2)
(110,192,2)
(23,192,2)
(45,189,2)
(266,188,2)
(237,213,2)
(143,192,2)
(156,192,2)
(93,192,2)
(158,103,2)
(12,271,2)
(27,370,2)
(302,370,2)
(26,192,2)
(54,322,2)
(228,236,2)
(283,339,2)
(13,192,2)
(322,192,2)
(34,239,2)
(82,192,2)
(370,339,2)
(294,370,2)
(135,331,2)
(371,192,2)
(15,192,2)
(297,339,2)
(246,192,2)
(172,214,2)
(182,20,2)
(226,70,2)
(28,192,2)
(225,192,2)
(95,192,2)
(318,192,2)
(363,221,2)
(248,103,2)
(40,192,2)
(85,192,2)
(370,297,2)
(333,370,2)
(305,273,2)
(183,342,2)
(339,357,2)
(354,192,2)
(292,370,2)
(177,70,2)
(217,271,2)
(287,349,2)
(273,192,2)
(243,254,2)
(263,192,2)
(218,192,2)
(215,339,2)
(273,339,2)
(34,263,2)
(178,254,2)
(255,248,2)
(67,192,2)
(32,254,2)
(131,247,2)
(229,200,2)
(104,192,2)
(269,192,2)
(352,192,2)
(353,80,2)
(261,318,2)
(309,248,2)
(214,200,2)
(183,331,2)
(106,192,2)
(215,192,2)
(65,20,2)
(22,3,2)
(136,297,2)
(180,192,2)
(369,192,2)
(379,216,2)
(248,285,2)
(350,70,2)
(285,192,2)
(34,267,2)
(70,285,2)
(109,192,2)
(277,192,2)
(192,302,2)
(345,192,2)
(135,342,2)
(169,355,2)
(34,26,2)
(362,25,2)
(332,254,2)
(362,339,2)
(229,271,2)
(40,20,2)
(34,19,2)
(124,20,2)
(351,118,2)
(336,192,2)
(4,192,2)
(34,215,2)
(139,192,2)
(331,103,2)
(174,192,2)
(355,110,2)
(290,20,2)
(100,248,2)
(236,221,2)
(323,192,2)
(3,107,2)
(261,372,2)
(293,100,2)
(372,192,2)
(353,339,2)
(257,339,2)
(294,254,2)
(204,192,2)
(176,370,2)
(159,176,2)
(328,213,2)
(124,192,2)
(343,370,2)
(53,339,2)
(74,192,2)
(258,70,2)
(99,192,2)
(188,212,2)
(96,15,2)
(229,189,2)
(201,213,2)
(107,192,2)
(326,70,2)
(214,244,2)
(251,192,2)
(15,68,2)
(176,312,2)
(0,192,2)
(296,351,2)
(313,192,2)
(217,188,2)
(244,200,2)
(129,370,2)
(131,184,2)
(131,192,2)
(356,192,2)
(189,200,2)
(376,192,2)
(171,302,2)
(366,192,2)
(103,192,2)
(380,302,2)
(183,103,2)
(312,30,2)
(8,192,2)
(304,248,2)
(170,192,2)
(233,192,2)
(59,192,2)
(241,192,2)
(121,192,2)
(76,192,2)
(281,192,2)
(157,192,2)
(52,97,2)
(128,302,2)
(235,197,2)
(186,370,2)
(263,22,2)
(182,192,2)
(311,339,2)
(35,297,2)
(234,369,2)
(290,192,2)
(252,271,2)
(310,192,2)
(70,212,2)
(353,20,2)
(179,254,2)
(344,14,2)
(252,101,2)
(122,192,2)
(49,248,2)
(159,136,2)
(318,339,2)
(27,254,2)
(325,293,2)
(311,161,2)
(14,20,2)
(235,192,2)
(41,370,2)
(254,370,2)
(203,370,2)
(265,103,2)
(6,370,2)
(364,192,2)
(353,293,2)
(221,254,2)
(335,192,2)
(70,347,2)
(302,221,2)
(17,302,2)
(341,236,2)
(224,192,2)
(131,344,2)
(64,189,2)
(34,323,2)
(362,242,2)
(280,192,2)
(87,192,2)
(102,192,2)
(10,236,2)
(89,20,2)
(5,371,2)
(46,103,2)
(231,101,2)
(42,259,2)
(309,20,2)
(192,287,2)
(75,192,2)
(5,192,2)
(214,226,2)
(19,5,2)
(219,342,2)
(24,192,2)
(202,103,2)
(84,192,2)
(266,183,2)
(226,350,2)
(34,225,2)
(165,192,2)
(296,119,2)
(140,192,2)
(38,236,2)
(2,192,2)
(127,254,2)
(220,236,2)
(132,192,2)
(118,192,2)
(259,281,2)
(311,183,2)
(223,192,2)
(228,339,2)
(112,290,2)
(213,103,2)
(25,370,2)
(319,192,2)
(305,360,2)
(133,293,2)
(172,226,2)
(19,192,2)
(366,20,2)
(16,21,2)
(253,103,2)
(238,192,2)
(274,192,2)
(197,339,2)
(240,254,2)
(236,339,2)
(348,370,2)
(19,238,2)
(261,182,2)
(105,192,2)
(199,192,2)
(357,256,2)
(194,192,2)
-----------------------------------
(0,q)
(1,id)
(2,qe)
(3,ast_channel_caller(qe->chan)
(4,announce)
(5,ast_channel_connected(qe->chan)
(6,min_penalty)
(7,if (!(q = find_load_queue_rt_friendly(queuename)
(8,qe->chan)
(9,qe)
(10,maxlen)
(11,inserted = 0)
(12,&pos)
(13,id)
(14,qe->announce)
(15,ast_channel_connected(qe->chan)
(16,ast_channel_caller(qe->chan)
(17,*reason)
(18,if ((!inserted)
(19,S_COR(ast_channel_connected(qe->chan)
(20,struct queue_ent *qe)
(21,ast_channel_caller(qe->chan)
(22,ast_channel_caller(qe->chan)
(23,qe->chan)
(24,qe)
(25,qe->min_penalty)
(26,q->count)
(27,QUEUE_UNKNOWN)
(28,moh)
(29,q)
(30,-1)
(31,queuename)
(32,QUEUE_JOINEMPTY)
(33,valid)
(34,ast_manager_event(qe->chan, EVENT_FLAG_CALL, "Join",\n\\n\\t\\t\\t"Channel: %s\\r\\n"\n\\n\\t\\t\\t"CallerIDNum: %s\\r\\n"\n\\n\\t\\t\\t"CallerIDName: %s\\r\\n"\n\\n\\t\\t\\t"ConnectedLineNum: %s\\r\\n"\n\\n\\t\\t\\t"ConnectedLineName: %s\\r\\n"\n\\n\\t\\t\\t"Queue: %s\\r\\n"\n\\n\\t\\t\\t"Position: %d\\r\\n"\n\\n\\t\\t\\t"Count: %d\\r\\n"\n\\n\\t\\t\\t"Uniqueid: %s\\r\\n",\n\\n\\t\\t\\tast_channel_name(qe->chan)
(35,joinempty)
(36,chan)
(37,qe)
(38,q->maxlen && (q->count >= q->maxlen)
(39,"Done with realtime queue")
(40,qe->chan)
(41,max_penalty)
(42,ast_devstate_changed(AST_DEVICE_RINGING, "Queue:%s", q->name)
(43,status = 0)
(44,qe->chan)
(45,LOG_NOTICE)
(46,inserted)
(47,if (!inserted)
(48,cur->prio)
(49,prio)
(50,NULL)
(51,str)
(52,cur->pos = ++pos)
(53,q->joinempty)
(54,ast_channel_connected(qe->chan)
(55,chan)
(56,count)
(57,q)
(58,ast_channel_connected(qe->chan)
(59,0)
(60,)
(61,inserted)
(62,qe)
(63,q)
(64,pos)
(65,qe->moh)
(66,)
(67,count)
(68,ast_channel_connected(qe->chan)
(69,pos)
(70,!inserted)
(71,)
(72,id)
(73,inserted)
(74,q)
(75,ast_channel_caller(qe->chan)
(76,q)
(77,1)
(78,name)
(79,name)
(80,&pos)
(81,q)
(82,chan)
(83,chan)
(84,q)
(85,number)
(86,q->name)
(87,qe)
(88,cur)
(89,qe->chan)
(90,1)
(91,context)
(92,chan)
(93,ast_channel_name(qe->chan)
(94,pos)
(95,chan)
(96,S_COR(ast_channel_connected(qe->chan)
(97,++pos)
(98,)
(99,str)
(100,qe->prio > cur->prio)
(101,position)
(102,qe)
(103,cur)
(104,ast_channel_connected(qe->chan)
(105,name)
(106,id)
(107,ast_channel_caller(qe->chan)
(108,0)
(109,number)
(110,ast_channel_caller(qe->chan)
(111,cur)
(112,ast_channel_connected(qe->chan)
(113,announce)
(114,str)
(115,ast_channel_connected(qe->chan)
(116,)
(117,"unknown")
(118,qe->context)
(119,qe->context)
(120,if ((status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty)
(121,1)
(122,q)
(123,cur)
(124,qe->chan)
(125,)
(126,chan)
(127,queue_t_unref(q, "Done with realtime queue")
(128,reason)
(129,status)
(130,sizeof(qe->moh)
(131,ast_copy_string(qe->announce, q->announce, sizeof(qe->announce)
(132,chan)
(133,1)
(134,"Join")
(135,cur->prio)
(136,return res;)
(137,pos)
(138,qe)
(139,q)
(140,qe->chan)
(141,name)
(142,)
(143,q)
(144,EVENT_FLAG_CALL)
(145,cur)
(146,position)
(147,q->head)
(148,"Asked to be inserted at position %d but forced into position %d due to higher priority callers\\n")
(149,ast_channel_caller(qe->chan)
(150,qe)
(151,)
(152,valid)
(153,reason)
(154,id)
(155,inserted)
(156,id)
(157,qe)
(158,pos)
(159,RET)
(160,)
(161,prev = NULL)
(162,q)
(163,valid)
(164,if (q->joinempty)
(165,announce)
(166,qe)
(167,*reason)
(168,str)
(169,ast_channel_caller(qe->chan)
(170,qe->chan)
(171,QUEUE_UNKNOWN)
(172,(qe->prio >= cur->prio)
(173,return res;)
(174,pos)
(175,chan)
(176,return res;)
(177,cur)
(178,*reason = QUEUE_JOINEMPTY)
(179,q)
(180,count)
(181,0)
(182,qe->pos)
(183,prev = cur)
(184,qe->announce)
(185,res = 0)
(186,qe)
(187,res)
(188,!inserted)
(189,position < pos)
(190,moh)
(191,reason)
(192,*reason == QUEUE_UNKNOWN)
(193,q)
(194,0)
(195,qe)
(196,position)
(197,q->count)
(198,count)
(199,pos)
(200,int position)
(201,qe)
(202,pos)
(203,0)
(204,qe)
(205,pos)
(206,*prev = NULL)
(207,chan)
(208,qe)
(209,inserted)
(210,q)
(211,)
(212,inserted = 1)
(213,!inserted && (qe->prio >= cur->prio)
(214,position && (position <= pos + 1)
(215,q->name)
(216,ast_channel_connected(qe->chan)
(217,&pos)
(218,qe)
(219,cur->next)
(220,q)
(221,*reason == QUEUE_UNKNOWN)
(222,if (!inserted && (qe->prio >= cur->prio)
(223,qe)
(224,ast_channel_connected(qe->chan)
(225,qe->chan)
(226,qe->prio >= cur->prio)
(227,prev)
(228,q->maxlen)
(229,ast_log(LOG_NOTICE, "Asked to be inserted at position %d but forced into position %d due to higher priority callers\\n", position, pos)
(230,q)
(231,1)
(232,*reason)
(233,qe)
(234,ast_channel_caller(qe->chan)
(235,q->count++)
(236,q->maxlen)
(237,pos)
(238,ast_channel_connected(qe->chan)
(239,S_COR(ast_channel_caller(qe->chan)
(240,q)
(241,"Channel: %s\\r\\n"\n\\n\\t\\t\\t"CallerIDNum: %s\\r\\n"\n\\n\\t\\t\\t"CallerIDName: %s\\r\\n"\n\\n\\t\\t\\t"ConnectedLineNum: %s\\r\\n"\n\\n\\t\\t\\t"ConnectedLineName: %s\\r\\n"\n\\n\\t\\t\\t"Queue: %s\\r\\n"\n\\n\\t\\t\\t"Position: %d\\r\\n"\n\\n\\t\\t\\t"Count: %d\\r\\n"\n\\n\\t\\t\\t"Uniqueid: %s\\r\\n")
(242,qe->max_penalty)
(243,queue_t_unref(q, "Done with realtime queue")
(244,position <= pos + 1)
(245,joinempty)
(246,head)
(247,q->announce)
(248,!inserted)
(249,q->count)
(250,res)
(251,name)
(252,pos + 1)
(253,cur->pos)
(254,status = get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty)
(255,qe)
(256,char *queuename)
(257,q->context)
(258,prio)
(259,q->count == 1)
(260,ast_channel_caller(qe->chan)
(261,ast_debug(1, "Queue \'%s\' Join, Channel \'%s\', Position \'%d\'\\n", q->name, ast_channel_name(qe->chan)
(262,name)
(263,S_COR(ast_channel_caller(qe->chan)
(264,moh)
(265,cur)
(266,insert_entry(q, prev, qe, &pos)
(267,ast_channel_uniqueid(qe->chan)
(268,res)
(269,chan)
(270,)
(271,pos = 0)
(272,res)
(273,q->moh)
(274,"unknown")
(275,prio)
(276,prev)
(277,ast_channel_caller(qe->chan)
(278,position)
(279,)
(280,name)
(281,q->count)
(282,NULL)
(283,ao2_unlock(q)
(284,inserted)
(285,inserted = 0)
(286,context)
(287,*reason)
(288,q)
(289,AST_DEVICE_RINGING)
(290,qe->chan)
(291,number)
(292,ao2_unlock(q)
(293,(!inserted)
(294,res)
(295,QUEUE_FULL)
(296,ast_copy_string(qe->context, q->context, sizeof(qe->context)
(297,!(q = find_load_queue_rt_friendly(queuename)
(298,if (q->count == 1)
(299,prev)
(300,if (position < pos)
(301,"Queue \'%s\' Join, Channel \'%s\', Position \'%d\'\\n")
(302,*reason == QUEUE_UNKNOWN && q->maxlen && (q->count >= q->maxlen)
(303,id)
(304,cur)
(305,ast_copy_string(qe->moh, q->moh, sizeof(qe->moh)
(306,while (cur)
(307,status)
(308,ast_channel_connected(qe->chan)
(309,qe->prio)
(310,ast_channel_connected(qe->chan)
(311,insert_entry(q, prev, qe, &pos)
(312,res = -1)
(313,ast_channel_caller(qe->chan)
(314,q)
(315,res)
(316,q)
(317,"Queue:%s")
(318,q->name)
(319,qe)
(320,"unknown")
(321,next)
(322,qe->chan)
(323,qe->pos)
(324,inserted)
(325,qe)
(326,prio)
(327,q)
(328,pos)
(329,prev)
(330,if (*reason == QUEUE_UNKNOWN && q->maxlen && (q->count >= q->maxlen)
(331,cur = cur->next)
(332,"Done with realtime queue")
(333,q)
(334,qe)
(335,q)
(336,ast_channel_caller(qe->chan)
(337,id)
(338,maxlen)
(339,q = find_load_queue_rt_friendly(queuename)
(340,qe)
(341,q)
(342,cur = q->head)
(343,qe)
(344,sizeof(qe->announce)
(345,"unknown")
(346,pos)
(347,inserted = 1)
(348,reason)
(349,enum queue_result *reason)
(350,qe->prio)
(351,sizeof(qe->context)
(352,qe)
(353,insert_entry(q, prev, qe, &pos)
(354,prev)
(355,ast_channel_caller(qe->chan)
(356,qe)
(357,find_load_queue_rt_friendly(queuename)
(358,context)
(359,ao2_lock(q)
(360,qe->moh)
(361,status)
(362,get_member_status(q, qe->max_penalty, qe->min_penalty, q->joinempty)
(363,q)
(364,valid)
(365,cur)
(366,qe->chan)
(367,inserted)
(368,prev)
(369,ast_channel_caller(qe->chan)
(370,q->joinempty)
(371,ast_channel_connected(qe->chan)
(372,ast_channel_name(qe->chan)
(373,q->count >= q->maxlen)
(374,prev)
(375,ast_channel_connected(qe->chan)
(376,chan)
(377,number)
(378,1)
(379,ast_channel_connected(qe->chan)
(380,*reason = QUEUE_FULL)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^