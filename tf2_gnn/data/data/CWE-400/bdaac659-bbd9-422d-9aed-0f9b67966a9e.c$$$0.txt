-----label-----
0
-----code-----
static void gasnete_convert_strided_to_memvec(gasnet_memvec_t *srclist, gasnet_memvec_t *dstlist, 
                                    gasnete_strided_stats_t const *stats,
                                    void *dstaddr, const size_t dststrides[],
                                    void *srcaddr, const size_t srcstrides[],
                                    const size_t count[], size_t stridelevels) {
  size_t const contiglevel = stats->dualcontiguity;
  size_t const limit = stridelevels - stats->nulldims;
  size_t const srccontigsz = stats->srccontigsz;
  size_t const dstcontigsz = stats->dstcontigsz;
  gasnet_memvec_t * srcpos = srclist;
  gasnet_memvec_t * dstpos = dstlist;

  gasneti_assert(srclist != NULL && dstlist != NULL && stats != NULL);
  gasneti_assert(!gasnete_strided_empty(count, stridelevels));
  gasneti_assert(limit > contiglevel);

  if (srccontigsz == dstcontigsz) {
    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \
      srcpos->addr = psrc;                                   \
      srcpos->len = srccontigsz;                             \
      srcpos++;                                              \
      dstpos->addr = pdst;                                   \
      dstpos->len = dstcontigsz;                             \
      dstpos++;                                              \
    } while(0)
    GASNETE_STRIDED_HELPER(limit,contiglevel);
    #undef GASNETE_STRIDED_HELPER_LOOPBODY
  } else if (srccontigsz < dstcontigsz) {
    size_t const looplim = dstcontigsz / srccontigsz;
    size_t loopcnt = 0;
    gasneti_assert(looplim*srccontigsz == dstcontigsz);
    /* TODO: this loop could be made more efficient */
    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \
      srcpos->addr = psrc;                                   \
      srcpos->len = srccontigsz;                             \
      srcpos++;                                              \
      if (loopcnt == 0) {                                    \
        dstpos->addr = pdst;                                 \
        dstpos->len = dstcontigsz;                           \
        dstpos++;                                            \
        loopcnt = looplim;                                   \
      }                                                      \
      loopcnt--;                                             \
    } while(0)
    GASNETE_STRIDED_HELPER(limit,contiglevel);
    #undef GASNETE_STRIDED_HELPER_LOOPBODY
  } else { /* srccontigsz > dstcontigsz */
    size_t const looplim = srccontigsz / dstcontigsz;
    size_t loopcnt = 0;
    gasneti_assert(looplim*dstcontigsz == srccontigsz);
    /* TODO: this loop could be made more efficient */
    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \
      if (loopcnt == 0) {                                    \
        srcpos->addr = psrc;                                 \
        srcpos->len = srccontigsz;                           \
        srcpos++;                                            \
        loopcnt = looplim;                                   \
      }                                                      \
      loopcnt--;                                             \
      dstpos->addr = pdst;                                   \
      dstpos->len = dstcontigsz;                             \
      dstpos++;                                              \
    } while(0)
    GASNETE_STRIDED_HELPER(limit,contiglevel);
    #undef GASNETE_STRIDED_HELPER_LOOPBODY
  }
  gasneti_assert(srcpos == srclist+stats->srcsegments);
  gasneti_assert(dstpos == dstlist+stats->dstsegments);
}
-----children-----
1,2
1,3
1,4
3,4
3,5
3,6
3,7
3,8
3,9
3,10
3,11
3,12
3,13
5,6
5,7
6,7
8,9
8,10
11,12
11,13
12,13
14,15
14,16
17,18
17,19
18,19
20,21
20,22
23,24
23,25
25,26
25,27
28,29
28,30
29,30
31,32
31,33
34,35
34,36
36,37
36,38
39,40
39,41
40,41
42,43
42,44
45,46
45,47
46,47
48,49
48,50
51,52
51,53
52,53
54,55
56,57
56,58
56,59
56,60
56,61
56,62
56,63
56,64
56,65
56,66
56,67
56,68
57,58
58,59
58,60
59,60
61,62
61,63
63,64
64,65
64,66
65,66
68,69
69,70
69,71
70,71
72,73
72,74
74,75
75,76
75,77
76,77
78,79
78,80
79,80
82,83
83,84
83,85
84,85
86,87
86,88
88,89
89,90
89,91
90,91
93,94
94,95
94,96
95,96
97,98
97,99
99,100
100,101
100,102
101,102
104,105
105,106
105,107
106,107
108,109
108,110
108,111
111,112
112,113
114,115
115,116
115,117
116,117
118,119
118,120
118,121
121,122
122,123
124,125
125,126
125,127
126,127
128,129
128,130
129,130
129,131
130,131
130,132
131,132
133,134
135,136
135,137
136,137
138,139
140,141
140,142
141,142
143,144
145,146
146,147
146,148
147,148
149,150
150,151
150,152
150,153
151,152
153,154
155,156
157,158
158,159
158,160
159,160
161,162
161,163
162,163
164,165
166,167
166,168
166,169
167,168
167,169
168,169
170,171
172,173
173,174
174,175
174,176
174,177
175,176
177,178
179,180
181,182
181,183
181,184
182,183
182,184
183,184
185,186
187,188
187,189
187,190
187,191
188,189
189,190
189,191
190,191
192,193
192,194
194,195
195,196
195,197
196,197
198,199
200,201
201,202
201,203
202,203
204,205
204,206
206,207
208,209
209,210
209,211
210,211
212,213
212,214
213,214
213,215
214,215
216,217
218,219
220,221
221,222
221,223
221,224
222,223
224,225
226,227
228,229
228,230
228,231
228,232
229,230
230,231
230,232
231,232
233,234
233,235
235,236
236,237
236,238
237,238
239,240
241,242
242,243
242,244
243,244
245,246
245,247
247,248
249,250
250,251
250,252
251,252
253,254
253,255
254,255
254,256
255,256
257,258
259,260
261,262
262,263
262,264
262,265
263,264
265,266
267,268
269,270
270,271
270,272
271,272
273,274
273,275
274,275
276,277
276,278
277,278
279,280
279,281
280,281
283,284
284,285
284,286
285,286
287,288
287,289
288,289
290,291
290,292
291,292
293,294
293,295
294,295
-----nextToken-----
2,4,7,9,10,13,15,16,19,21,22,24,26,27,30,32,33,35,37,38,41,43,44,47,49,50,53,55,60,62,66,67,71,73,77,80,81,85,87,91,92,96,98,102,103,107,109,110,113,117,119,120,123,127,132,134,137,139,142,144,148,152,154,156,160,163,165,169,171,176,178,180,184,186,191,193,197,199,203,205,207,211,215,217,219,223,225,227,232,234,238,240,244,246,248,252,256,258,260,264,266,268,272,275,278,281,282,286,289,292,295,296
-----computeFrom-----
75,76
75,77
128,129
128,130
129,130
129,131
130,131
130,132
135,136
135,137
140,141
140,142
161,162
161,163
167,168
167,169
182,183
182,184
195,196
195,197
212,213
212,214
213,214
213,215
236,237
236,238
253,254
253,255
254,255
254,256
273,274
273,275
276,277
276,278
287,288
287,289
290,291
290,292
-----guardedBy-----
184,217
186,219
-----guardedByNegation-----
169,260
171,258
184,260
186,258
-----lastLexicalUse-----
184,260
186,258
-----jump-----
184,260
186,258
-----attribute-----
FunctionDefinition;SimpleDeclSpecifier;FunctionDeclarator;Name;ParameterDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;ParameterDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;ParameterDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;ParameterDeclaration;SimpleDeclSpecifier;Declarator;Pointer;Name;ParameterDeclaration;NamedTypeSpecifier;Name;ArrayDeclarator;Name;ArrayModifier;ParameterDeclaration;SimpleDeclSpecifier;Declarator;Pointer;Name;ParameterDeclaration;NamedTypeSpecifier;Name;ArrayDeclarator;Name;ArrayModifier;ParameterDeclaration;NamedTypeSpecifier;Name;ArrayDeclarator;Name;ArrayModifier;ParameterDeclaration;NamedTypeSpecifier;Name;Declarator;Name;CompoundStatement;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;FieldReference;IdExpression;Name;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;BinaryExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;FieldReference;IdExpression;Name;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;FieldReference;IdExpression;Name;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;EqualsInitializer;IdExpression;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Pointer;Name;EqualsInitializer;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;BinaryExpression;BinaryExpression;BinaryExpression;IdExpression;Name;IdExpression;Name;BinaryExpression;IdExpression;Name;IdExpression;Name;BinaryExpression;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;UnaryExpression;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;BinaryExpression;IdExpression;Name;IdExpression;Name;IfStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;IfStatement;BinaryExpression;IdExpression;Name;IdExpression;Name;CompoundStatement;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;BinaryExpression;IdExpression;Name;IdExpression;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;LiteralExpression;ExpressionStatement;FunctionCallExpression;IdExpression;Name;BinaryExpression;BinaryExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;CompoundStatement;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;BinaryExpression;IdExpression;Name;IdExpression;Name;DeclarationStatement;SimpleDeclaration;NamedTypeSpecifier;Name;Declarator;Name;EqualsInitializer;LiteralExpression;ExpressionStatement;FunctionCallExpression;IdExpression;Name;BinaryExpression;BinaryExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;IdExpression;Name;IdExpression;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;BinaryExpression;IdExpression;Name;BinaryExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;ExpressionStatement;FunctionCallExpression;IdExpression;Name;BinaryExpression;IdExpression;Name;BinaryExpression;IdExpression;Name;FieldReference;IdExpression;Name;Name;
-----ast_node-----
static void gasnete_convert_strided_to_memvec(gasnet_memvec_t *srclist, gasnet_memvec_t *dstlist,                                     gasnete_strided_stats_t const *stats,                                    void *dstaddr, const size_t dststrides[],                                    void *srcaddr, const size_t srcstrides[],                                    const size_t count[], size_t stridelevels) {  size_t const contiglevel = stats->dualcontiguity;  size_t const limit = stridelevels - stats->nulldims;  size_t const srccontigsz = stats->srccontigsz;  size_t const dstcontigsz = stats->dstcontigsz;  gasnet_memvec_t * srcpos = srclist;  gasnet_memvec_t * dstpos = dstlist;  gasneti_assert(srclist != NULL && dstlist != NULL && stats != NULL);  gasneti_assert(!gasnete_strided_empty(count, stridelevels));  gasneti_assert(limit > contiglevel);  if (srccontigsz == dstcontigsz) {    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  } else if (srccontigsz < dstcontigsz) {    size_t const looplim = dstcontigsz / srccontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*srccontigsz == dstcontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      if (loopcnt == 0) {                                    \        dstpos->addr = pdst;                                 \        dstpos->len = dstcontigsz;                           \        dstpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  } else { /* srccontigsz > dstcontigsz */    size_t const looplim = srccontigsz / dstcontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*dstcontigsz == srccontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      if (loopcnt == 0) {                                    \        srcpos->addr = psrc;                                 \        srcpos->len = srccontigsz;                           \        srcpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  }  gasneti_assert(srcpos == srclist+stats->srcsegments);  gasneti_assert(dstpos == dstlist+stats->dstsegments);}
static void
gasnete_convert_strided_to_memvec(gasnet_memvec_t *srclist, gasnet_memvec_t *dstlist,                                     gasnete_strided_stats_t const *stats,                                    void *dstaddr, const size_t dststrides[],                                    void *srcaddr, const size_t srcstrides[],                                    const size_t count[], size_t stridelevels)
gasnete_convert_strided_to_memvec
gasnet_memvec_t *srclist
gasnet_memvec_t
gasnet_memvec_t
*srclist
*
srclist
gasnet_memvec_t *dstlist
gasnet_memvec_t
gasnet_memvec_t
*dstlist
*
dstlist
gasnete_strided_stats_t const *stats
gasnete_strided_stats_t const
gasnete_strided_stats_t
*stats
*
stats
void *dstaddr
void
*dstaddr
*
dstaddr
const size_t dststrides[]
const size_t
size_t
dststrides[]
dststrides
[]
void *srcaddr
void
*srcaddr
*
srcaddr
const size_t srcstrides[]
const size_t
size_t
srcstrides[]
srcstrides
[]
const size_t count[]
const size_t
size_t
count[]
count
[]
size_t stridelevels
size_t
size_t
stridelevels
stridelevels
{  size_t const contiglevel = stats->dualcontiguity;  size_t const limit = stridelevels - stats->nulldims;  size_t const srccontigsz = stats->srccontigsz;  size_t const dstcontigsz = stats->dstcontigsz;  gasnet_memvec_t * srcpos = srclist;  gasnet_memvec_t * dstpos = dstlist;  gasneti_assert(srclist != NULL && dstlist != NULL && stats != NULL);  gasneti_assert(!gasnete_strided_empty(count, stridelevels));  gasneti_assert(limit > contiglevel);  if (srccontigsz == dstcontigsz) {    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  } else if (srccontigsz < dstcontigsz) {    size_t const looplim = dstcontigsz / srccontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*srccontigsz == dstcontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      if (loopcnt == 0) {                                    \        dstpos->addr = pdst;                                 \        dstpos->len = dstcontigsz;                           \        dstpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  } else { /* srccontigsz > dstcontigsz */    size_t const looplim = srccontigsz / dstcontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*dstcontigsz == srccontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      if (loopcnt == 0) {                                    \        srcpos->addr = psrc;                                 \        srcpos->len = srccontigsz;                           \        srcpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  }  gasneti_assert(srcpos == srclist+stats->srcsegments);  gasneti_assert(dstpos == dstlist+stats->dstsegments);}
size_t const contiglevel = stats->dualcontiguity;
size_t const contiglevel = stats->dualcontiguity;
size_t const
size_t
contiglevel = stats->dualcontiguity
contiglevel
= stats->dualcontiguity
stats->dualcontiguity
stats
stats
dualcontiguity
size_t const limit = stridelevels - stats->nulldims;
size_t const limit = stridelevels - stats->nulldims;
size_t const
size_t
limit = stridelevels - stats->nulldims
limit
= stridelevels - stats->nulldims
stridelevels - stats->nulldims
stridelevels
stridelevels
stats->nulldims
stats
stats
nulldims
size_t const srccontigsz = stats->srccontigsz;
size_t const srccontigsz = stats->srccontigsz;
size_t const
size_t
srccontigsz = stats->srccontigsz
srccontigsz
= stats->srccontigsz
stats->srccontigsz
stats
stats
srccontigsz
size_t const dstcontigsz = stats->dstcontigsz;
size_t const dstcontigsz = stats->dstcontigsz;
size_t const
size_t
dstcontigsz = stats->dstcontigsz
dstcontigsz
= stats->dstcontigsz
stats->dstcontigsz
stats
stats
dstcontigsz
gasnet_memvec_t * srcpos = srclist;
gasnet_memvec_t * srcpos = srclist;
gasnet_memvec_t
gasnet_memvec_t
* srcpos = srclist
*
srcpos
= srclist
srclist
srclist
gasnet_memvec_t * dstpos = dstlist;
gasnet_memvec_t * dstpos = dstlist;
gasnet_memvec_t
gasnet_memvec_t
* dstpos = dstlist
*
dstpos
= dstlist
dstlist
dstlist
gasneti_assert(srclist != NULL && dstlist != NULL && stats != NULL);
gasneti_assert(srclist != NULL && dstlist != NULL && stats != NULL)
gasneti_assert
gasneti_assert
srclist != NULL && dstlist != NULL && stats != NULL
srclist != NULL && dstlist != NULL
srclist != NULL
srclist
srclist
NULL
NULL
dstlist != NULL
dstlist
dstlist
NULL
NULL
stats != NULL
stats
stats
NULL
NULL
gasneti_assert(!gasnete_strided_empty(count, stridelevels));
gasneti_assert(!gasnete_strided_empty(count, stridelevels))
gasneti_assert
gasneti_assert
!gasnete_strided_empty(count, stridelevels)
gasnete_strided_empty(count, stridelevels)
gasnete_strided_empty
gasnete_strided_empty
count
count
stridelevels
stridelevels
gasneti_assert(limit > contiglevel);
gasneti_assert(limit > contiglevel)
gasneti_assert
gasneti_assert
limit > contiglevel
limit
limit
contiglevel
contiglevel
if (srccontigsz == dstcontigsz) {    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  } else if (srccontigsz < dstcontigsz) {    size_t const looplim = dstcontigsz / srccontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*srccontigsz == dstcontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      if (loopcnt == 0) {                                    \        dstpos->addr = pdst;                                 \        dstpos->len = dstcontigsz;                           \        dstpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  } else { /* srccontigsz > dstcontigsz */    size_t const looplim = srccontigsz / dstcontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*dstcontigsz == srccontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      if (loopcnt == 0) {                                    \        srcpos->addr = psrc;                                 \        srcpos->len = srccontigsz;                           \        srcpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  }
srccontigsz == dstcontigsz
srccontigsz
srccontigsz
dstcontigsz
dstcontigsz
{    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  }
GASNETE_STRIDED_HELPER(limit,contiglevel);
GASNETE_STRIDED_HELPER(limit,contiglevel)
GASNETE_STRIDED_HELPER
GASNETE_STRIDED_HELPER
limit
limit
contiglevel
contiglevel
if (srccontigsz < dstcontigsz) {    size_t const looplim = dstcontigsz / srccontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*srccontigsz == dstcontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      if (loopcnt == 0) {                                    \        dstpos->addr = pdst;                                 \        dstpos->len = dstcontigsz;                           \        dstpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  } else { /* srccontigsz > dstcontigsz */    size_t const looplim = srccontigsz / dstcontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*dstcontigsz == srccontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      if (loopcnt == 0) {                                    \        srcpos->addr = psrc;                                 \        srcpos->len = srccontigsz;                           \        srcpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  }
srccontigsz < dstcontigsz
srccontigsz
srccontigsz
dstcontigsz
dstcontigsz
{    size_t const looplim = dstcontigsz / srccontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*srccontigsz == dstcontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      srcpos->addr = psrc;                                   \      srcpos->len = srccontigsz;                             \      srcpos++;                                              \      if (loopcnt == 0) {                                    \        dstpos->addr = pdst;                                 \        dstpos->len = dstcontigsz;                           \        dstpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  }
size_t const looplim = dstcontigsz / srccontigsz;
size_t const looplim = dstcontigsz / srccontigsz;
size_t const
size_t
looplim = dstcontigsz / srccontigsz
looplim
= dstcontigsz / srccontigsz
dstcontigsz / srccontigsz
dstcontigsz
dstcontigsz
srccontigsz
srccontigsz
size_t loopcnt = 0;
size_t loopcnt = 0;
size_t
size_t
loopcnt = 0
loopcnt
= 0
0
gasneti_assert(looplim*srccontigsz == dstcontigsz);
gasneti_assert(looplim*srccontigsz == dstcontigsz)
gasneti_assert
gasneti_assert
looplim*srccontigsz == dstcontigsz
looplim*srccontigsz
looplim
looplim
srccontigsz
srccontigsz
dstcontigsz
dstcontigsz
GASNETE_STRIDED_HELPER(limit,contiglevel);
GASNETE_STRIDED_HELPER(limit,contiglevel)
GASNETE_STRIDED_HELPER
GASNETE_STRIDED_HELPER
limit
limit
contiglevel
contiglevel
{ /* srccontigsz > dstcontigsz */    size_t const looplim = srccontigsz / dstcontigsz;    size_t loopcnt = 0;    gasneti_assert(looplim*dstcontigsz == srccontigsz);    /* TODO: this loop could be made more efficient */    #define GASNETE_STRIDED_HELPER_LOOPBODY(psrc,pdst)  do { \      if (loopcnt == 0) {                                    \        srcpos->addr = psrc;                                 \        srcpos->len = srccontigsz;                           \        srcpos++;                                            \        loopcnt = looplim;                                   \      }                                                      \      loopcnt--;                                             \      dstpos->addr = pdst;                                   \      dstpos->len = dstcontigsz;                             \      dstpos++;                                              \    } while(0)    GASNETE_STRIDED_HELPER(limit,contiglevel);    #undef GASNETE_STRIDED_HELPER_LOOPBODY  }
size_t const looplim = srccontigsz / dstcontigsz;
size_t const looplim = srccontigsz / dstcontigsz;
size_t const
size_t
looplim = srccontigsz / dstcontigsz
looplim
= srccontigsz / dstcontigsz
srccontigsz / dstcontigsz
srccontigsz
srccontigsz
dstcontigsz
dstcontigsz
size_t loopcnt = 0;
size_t loopcnt = 0;
size_t
size_t
loopcnt = 0
loopcnt
= 0
0
gasneti_assert(looplim*dstcontigsz == srccontigsz);
gasneti_assert(looplim*dstcontigsz == srccontigsz)
gasneti_assert
gasneti_assert
looplim*dstcontigsz == srccontigsz
looplim*dstcontigsz
looplim
looplim
dstcontigsz
dstcontigsz
srccontigsz
srccontigsz
GASNETE_STRIDED_HELPER(limit,contiglevel);
GASNETE_STRIDED_HELPER(limit,contiglevel)
GASNETE_STRIDED_HELPER
GASNETE_STRIDED_HELPER
limit
limit
contiglevel
contiglevel
gasneti_assert(srcpos == srclist+stats->srcsegments);
gasneti_assert(srcpos == srclist+stats->srcsegments)
gasneti_assert
gasneti_assert
srcpos == srclist+stats->srcsegments
srcpos
srcpos
srclist+stats->srcsegments
srclist
srclist
stats->srcsegments
stats
stats
srcsegments
gasneti_assert(dstpos == dstlist+stats->dstsegments);
gasneti_assert(dstpos == dstlist+stats->dstsegments)
gasneti_assert
gasneti_assert
dstpos == dstlist+stats->dstsegments
dstpos
dstpos
dstlist+stats->dstsegments
dstlist
dstlist
stats->dstsegments
stats
stats
dstsegments
-----joern-----
(58,73,0)
(65,75,0)
(61,75,0)
(2,75,0)
(80,70,0)
(85,75,0)
(3,18,0)
(27,16,0)
(60,44,0)
(62,41,0)
(82,61,0)
(54,3,0)
(95,75,0)
(1,13,0)
(3,85,0)
(18,69,0)
(16,75,0)
(35,85,0)
(31,8,0)
(19,75,0)
(24,75,0)
(64,69,0)
(70,75,0)
(51,57,0)
(84,61,0)
(22,1,0)
(43,75,0)
(5,89,0)
(14,72,0)
(41,29,0)
(35,18,0)
(28,59,0)
(4,22,0)
(50,16,0)
(33,57,0)
(88,66,0)
(22,91,0)
(76,50,0)
(52,22,0)
(3,54,0)
(89,13,0)
(41,62,0)
(8,16,0)
(36,61,0)
(80,33,0)
(44,91,0)
(72,70,0)
(67,43,0)
(82,8,0)
(83,3,0)
(87,88,0)
(49,62,0)
(89,90,0)
(32,18,0)
(73,51,0)
(72,57,0)
(12,70,0)
(89,93,0)
(30,1,0)
(69,18,0)
(63,82,0)
(73,70,0)
(86,59,0)
(10,3,0)
(19,29,0)
(11,35,0)
(43,59,0)
(17,16,0)
(8,57,0)
(92,85,0)
(94,57,0)
(18,75,0)
(46,88,0)
(62,79,0)
(41,44,0)
(20,35,0)
(48,50,0)
(42,36,0)
(55,36,0)
(6,75,0)
(94,61,0)
(85,1,0)
(25,94,0)
(29,88,0)
(68,44,0)
(69,91,0)
(70,79,0)
(90,89,0)
(29,41,0)
(47,17,0)
(23,62,0)
(44,41,0)
(78,80,0)
(38,75,0)
(37,33,0)
(6,90,0)
(45,77,0)
(1,85,0)
(51,43,0)
(9,61,0)
(77,57,0)
(61,66,0)
(16,50,0)
(21,80,0)
(90,6,0)
(54,75,0)
(59,91,0)
(7,73,0)
(17,43,0)
(1,22,0)
(59,43,0)
(29,19,0)
(0,82,0)
(50,91,0)
(74,75,0)
(53,17,0)
(56,75,0)
(40,51,0)
(39,89,0)
(15,75,0)
(81,70,0)
(36,77,0)
(71,69,0)
(88,29,0)
(92,18,1)
(70,79,1)
(3,85,1)
(73,58,1)
(29,41,1)
(36,61,1)
(0,77,1)
(49,23,1)
(25,8,1)
(72,70,1)
(17,53,1)
(44,91,1)
(47,54,1)
(40,73,1)
(27,85,1)
(31,82,1)
(3,18,1)
(62,79,1)
(26,35,1)
(28,86,1)
(63,0,1)
(37,80,1)
(55,17,1)
(59,91,1)
(69,91,1)
(52,30,1)
(21,94,1)
(1,22,1)
(88,66,1)
(89,39,1)
(3,83,1)
(26,17,1)
(60,68,1)
(17,43,1)
(29,88,1)
(68,62,1)
(41,44,1)
(7,33,1)
(12,61,1)
(44,60,1)
(14,51,1)
(82,61,1)
(20,11,1)
(51,43,1)
(46,70,1)
(82,63,1)
(35,20,1)
(34,26,1)
(85,1,1)
(86,67,1)
(53,47,1)
(67,16,1)
(22,4,1)
(51,40,1)
(64,32,1)
(9,43,1)
(19,29,1)
(30,92,1)
(42,55,1)
(17,16,1)
(70,81,1)
(72,14,1)
(59,28,1)
(94,61,1)
(71,64,1)
(1,13,1)
(77,45,1)
(22,91,1)
(35,85,1)
(10,6,1)
(61,66,1)
(89,93,1)
(4,52,1)
(80,78,1)
(61,84,1)
(80,70,1)
(36,42,1)
(78,21,1)
(8,31,1)
(73,70,1)
(84,9,1)
(50,91,1)
(50,48,1)
(39,5,1)
(83,10,1)
(33,37,1)
(90,89,1)
(87,46,1)
(69,71,1)
(58,7,1)
(45,36,1)
(8,16,1)
(26,72,1)
(18,69,1)
(48,76,1)
(5,19,1)
(35,18,1)
(16,50,1)
(89,13,1)
(43,59,1)
(81,12,1)
(88,87,1)
(94,25,1)
(54,3,1)
(23,88,1)
(41,62,1)
(76,27,1)
(6,90,1)
(62,49,1)
(11,26,1)
(88,66,2)
(36,61,2)
(63,17,2)
(85,1,2)
(82,17,2)
(68,62,2)
(33,17,2)
(0,17,2)
(54,3,2)
(22,91,2)
(36,17,2)
(90,89,2)
(6,90,2)
(20,26,2)
(17,16,2)
(51,17,2)
(29,88,2)
(17,43,2)
(35,85,2)
(18,69,2)
(62,88,2)
(8,17,2)
(58,17,2)
(45,17,2)
(29,41,2)
(51,43,2)
(41,44,2)
(42,17,2)
(82,61,2)
(89,93,2)
(11,26,2)
(89,13,2)
(3,85,2)
(35,26,2)
(37,17,2)
(44,62,2)
(41,62,2)
(94,17,2)
(94,61,2)
(55,17,2)
(8,16,2)
(14,17,2)
(60,62,2)
(7,17,2)
(73,70,2)
(59,91,2)
(50,91,2)
(43,59,2)
(19,29,2)
(1,13,2)
(72,17,2)
(41,88,2)
(26,26,2)
(25,17,2)
(80,17,2)
(77,17,2)
(35,18,2)
(31,17,2)
(78,17,2)
(70,79,2)
(69,91,2)
(62,79,2)
(23,88,2)
(16,50,2)
(49,88,2)
(3,18,2)
(40,17,2)
(1,22,2)
(61,66,2)
(21,17,2)
(44,91,2)
(72,70,2)
(80,70,2)
(73,17,2)
-----------------------------------
(0,srcpos)
(1,stridelevels - stats->nulldims)
(2,srccontigsz)
(3,limit > contiglevel)
(4,nulldims)
(5,count)
(6,gasneti_assert(!gasnete_strided_empty(count, stridelevels)
(7,dstpos)
(8,srcpos->len = srccontigsz)
(9,srcpos)
(10,limit)
(11,limit)
(12,dstpos)
(13,size_t stridelevels)
(14,dstpos)
(15,while(0)
(16,srccontigsz = stats->srccontigsz)
(17,srccontigsz == dstcontigsz)
(18,contiglevel = stats->dualcontiguity)
(19,gasneti_assert(srclist != NULL && dstlist != NULL && stats != NULL)
(20,contiglevel)
(21,dstpos)
(22,stats->nulldims)
(23,dstlist)
(24,srcpos)
(25,srcpos)
(26,0)
(27,srccontigsz)
(28,dstcontigsz)
(29,srclist != NULL && dstlist != NULL && stats != NULL)
(30,stridelevels)
(31,srccontigsz)
(32,contiglevel)
(33,dstpos->addr = pdst)
(34,RET)
(35,GASNETE_STRIDED_HELPER(limit,contiglevel)
(36,srcpos->addr)
(37,pdst)
(38,if (srccontigsz == dstcontigsz)
(39,stridelevels)
(40,dstcontigsz)
(41,dstlist != NULL && stats != NULL)
(42,addr)
(43,dstcontigsz = stats->dstcontigsz)
(44,stats != NULL)
(45,psrc)
(46,srclist)
(47,srccontigsz)
(48,srccontigsz)
(49,NULL)
(50,stats->srccontigsz)
(51,dstpos->len = dstcontigsz)
(52,stats)
(53,dstcontigsz)
(54,gasneti_assert(limit > contiglevel)
(55,srcpos)
(56,limit)
(57,)
(58,len)
(59,stats->dstcontigsz)
(60,NULL)
(61,* srcpos = srclist)
(62,dstlist != NULL)
(63,len)
(64,stats)
(65,dstcontigsz)
(66,gasnet_memvec_t *srclist)
(67,dstcontigsz)
(68,stats)
(69,stats->dualcontiguity)
(70,* dstpos = dstlist)
(71,dualcontiguity)
(72,dstpos++)
(73,dstpos->len)
(74,dstpos)
(75,)
(76,stats)
(77,srcpos->addr = psrc)
(78,addr)
(79,gasnet_memvec_t *dstlist)
(80,dstpos->addr)
(81,dstlist)
(82,srcpos->len)
(83,contiglevel)
(84,srclist)
(85,limit = stridelevels - stats->nulldims)
(86,stats)
(87,NULL)
(88,srclist != NULL)
(89,gasnete_strided_empty(count, stridelevels)
(90,!gasnete_strided_empty(count, stridelevels)
(91,gasnete_strided_stats_t const *stats)
(92,limit)
(93,const size_t count[])
(94,srcpos++)
(95,contiglevel)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^